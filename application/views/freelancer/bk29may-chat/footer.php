<!-- <footer class="container-fluid">

		<div class="modal fade" id="Delete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">

			<div class="modal-dialog" role="document">

				<div class="modal-content">

					<div class="modal-header">

						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>

						<h4 class="modal-title" id="myModalLabel">Are you sure you want to delete it?</h4>

					</div>



				<div class="modal-footer">

					<a href="" class="btn btn-danger" id="yEs">Yes</a>

					<button class="btn btn-warning" data-dismiss="modal" aria-hidden="true">No</button>



				</div>

			</div>

		</div>

	</div>



	<div class="modal fade" id="change" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">

		<div role="document" class="modal-dialog">

			<div class="modal-content">

				<div class="modal-header">

					<button aria-label="Close" data-dismiss="modal" class="close" type="button"><span aria-hidden="true">×</span></button>

					<h4 id="myModalLabel" class="modal-title">Change Password</h4>

				</div>

				<form method="post" action="action.php?act=change_pass" role="form">

					<div class="modal-body">

						<div class="box-body">

							<div class="form-group">

								<input type="password" class="form-control"  name="opass" placeholder="Enter Old Password" required>

							</div>

							<div class="form-group">

								<input type="password" class="form-control" name="pass" placeholder="New Password" required>

							</div>

							<div class="form-group">

								<input type="password" class="form-control"  name="rpass" placeholder="Retype Password" required>

							</div>

						</div>



					</div>

					<div class="box-footer">

						<button type="submit" class="btn btn-primary pull-right">OK</button>

					</div>



				</form>

			</div>

		</div>



	</div>



	<div class="row">

		<div class="col-md-3 col-xs-12 col-sm-4 pull-left">

			<img src="<?php echo base_url(); ?>assets/front/images/footer-logo.png" alt="logo">



		</div>

		<div class="col-md-6 col-xs-12 col-sm-12 no-padding">

			<div class="col-md-4 col-xs-12 col-sm-4 pull-left">

				<h2 class="widget-title">Rankings</h2>

				<ul>

					<li><a href="#">Best SEO Companies</a></li>

					<li><a href="#">Best PPC Companies</a></li>

					<li><a href="#">Integrated Search Companies</a></li>

					<li><a href="#">Reputation Management</a></li>

					<li><a href="#">Social Media Marketing</a></li>

					<li><a href="#">More Rankings</a></li>

				</ul>

			</div>

			<div class="col-md-4 col-xs-12 col-sm-4 pull-left">

				<h2 class="widget-title">Rankings</h2>

				<ul>

					<li><a href="#">Best SEO Companies</a></li>

					<li><a href="#">Best PPC Companies</a></li>

					<li><a href="#">Integrated Search Companies</a></li>

					<li><a href="#">Reputation Management</a></li>

					<li><a href="#">Social Media Marketing</a></li>

					<li><a href="#">More Rankings</a></li>

				</ul>

			</div>

			<div class="col-md-4 col-xs-12 col-sm-4 pull-left">

				<h2 class="widget-title">Rankings</h2>

				<ul>

					<li><a href="#">Best SEO Companies</a></li>

					<li><a href="#">Best PPC Companies</a></li>

					<li><a href="#">Integrated Search Companies</a></li>

					<li><a href="#">Reputation Management</a></li>

					<li><a href="#">Social Media Marketing</a></li>

					<li><a href="#">More Rankings</a></li>

				</ul>

			</div>

		</div>

		<div class="col-md-3 col-xs-12 col-sm-12 footer-icons">

			<h2 class="widget-title">Follow Us</h2>

			<ul>

				<li><a href="#" ><i class="fa fa-facebook"></i>Facebook</a></li>

				<li><a href="#" ><i class="fa fa-twitter"></i>Twitter</a></li>

				<li><a href="#" ><i class="fa fa-google"></i>Linkedin</a></li>

				<li><a href="#" ><i class="fa fa-linkedin"></i>Google+</a></li>

			</ul>



		</div>

	</div>



</footer> -->

<section class="container-fluid copyright">

	<div class="container">

		<div class="row">

			<div class="col-12">

				<ul>

					<li>Copyright 2019 © topseos. Use of this website constitutes acceptance of</li>

					<li><a href="#">Terms & Conditions</a></li>

					<li><a href="#">Privacy Policy</a></li>

					<li><a href="#">Legal Disclosure</a></li>

				</ul>

			</div>

		</div>

	</div>

</section>



<script src="<?php echo base_url(); ?>assets/js/popper.min.js"></script>

<script src="<?php echo base_url(); ?>assets/js/bootstrap.min.js"></script>

<!--script src="js/bootstrap.bundle.min.js"></script-->

<script src="<?php echo base_url(); ?>assets/js/slick.js" type="text/javascript" charset="utf-8"></script>



<!-- select js -->



<script src="<?php echo base_url(); ?>assets/js/prism.js" type="text/javascript" charset="utf-8"></script>

<script src="<?php echo base_url(); ?>assets/js/init.js" type="text/javascript" charset="utf-8"></script>

<script src="<?php echo base_url(); ?>assets/front/js/custom.js" type="text/javascript" charset="utf-8"></script>
<script src="<?php echo base_url(); ?>assets/js/notify.js" type="text/javascript" charset="utf-8"></script>




<script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>

<script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap.min.js"></script>

<script src="https://cdn.datatables.net/responsive/2.2.0/js/dataTables.responsive.min.js"></script>

<script src="https://cdn.datatables.net/responsive/2.2.0/js/responsive.bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
<script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/additional-methods.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
<script src="https://cdn.rawgit.com/Luegg/angularjs-scroll-glue/master/src/scrollglue.js"></script>
<script src="//cdn.ckeditor.com/4.7.2/standard/ckeditor.js"></script>
<script src="<?php echo base_url(); ?>assets/front/js/custom.js"></script>
<script src="https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>

<!-- <script src="<?php echo base_url(); ?>assets/multiselect/multiselect.js"></script> -->

<script type="text/javascript" src="<?php echo base_url(); ?>assets/js/jquery.simplePagination.js"></script>
<!-- <script src="socket.io/socket.io.js"></script> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
<!-- <script src="<?php echo base_url(); ?>assets/front/js/socket.js"></script> -->


<script>
function myFunction() {
  var elmnt = document.getElementById("bottom");
  var x = elmnt.scrollLeft;
  var y = elmnt.scrollTop;
   // console.log(x);
   //console.log(y);
   if(y == 0)
   {
    angular.element(document.getElementById('chatcontroller')).scope().lastMessages();
   }
}
$(document).ready(function(){

$(document).on("click", "body",function(e) {

			var idd = $($(e.target).parent()).attr('id');
		if( (!idd && e.target.id != 'unn') || (idd && idd != 'chosenresults'))
		{
			$("#prac_areas_chosen").removeClass('chosen-with-drop');
			$("#prac_areas_chosen").removeClass('chosen-container-active');
		}


	 });

	 $(document).on("click", "body",function(e) {

		 var idd = $($(e.target).parent()).attr('id');
	 if( (!idd && e.target.id != 'unns') || (idd && idd != 'chosenresults1'))
	 {
		 $("#ser_chosen").removeClass('chosen-with-drop');
		 $("#ser_chosen").removeClass('chosen-container-active');
	 }


	});




});



/////////////////////// chat
CKEDITOR.replaceClass = 'ckeditor';



var app1 = angular.module('myApp1',['luegg.directives'])

app1.filter('time', function () {
	return function (item) {
		var dates = new Date(Date.parse(item))
		var minutes = dates.getMinutes();
		if(minutes > 10)
		{
			var time = '' + dates.getHours() + ':' + dates.getMinutes();
		}
		else
		{
			var time = '' + dates.getHours() + ':'+'0'+dates.getMinutes();
		}
		//console.log(time);
		return time;
	};
});

app1.filter('trustAsHtml',['$sce', function($sce) {

	return function(text) {

		return $sce.trustAsHtml(text);
			 };
}]);



app1.directive('ngEnter', function () {
	 return function (scope, element, attrs) {
			 element.bind("keydown keypress", function (event) {
					 if (event.which === 13) {
							 scope.$apply(function () {
									 scope.$eval(attrs.ngEnter);
							 });

							 event.preventDefault();
					 }
			 });
	 };
});

// app1.directive('scroll', function($window) {
//     return {
//         scope: {
//           offset: "@offset"
//         },
//         link: function (scope, element, attr)
// 				{
//             angular.element($window).bind("scroll", function() {
//                  if (this.pageYOffset >= scope.offset) {
//                      scope.scrollClass = true;
// 								 	//	console.log(this.pageYOffset);
//                  }
//                 scope.$apply();
//             });
//         }
//     }
// });



app1.controller('myCtrt1', function($scope,$window,$http,$interval) {

	$scope.glued = true;
	$scope.person = [];
	$scope.messages = [];
	$scope.results='';
	$scope.getmessage ='';
	$scope.userId ='';
	$scope.username ='';
	$scope.userType ='';
	$scope.userimage ='';
	$scope.selectedContact = 0;
	$scope.selectedContactImage ='';
	$scope.msgtext ='';
	$scope.attachment ='';
	$scope.jobtitle ='';
	$scope.contractId ='';
	$scope.filterValue = '';
	$scope.msg ='';
	$scope.editmsg ='';
	$scope.offerId ='';
	$scope.milestone = '';
	$scope.milestones =[];
	$scope.offerTotal = 0;
	$scope.proposal ='';
	$scope.time ='';
	$scope.roomId ='';
	$scope.typingLENGTH =500;
	$scope.lastTypingTime='';
	$scope.typing = false;
	//var socket = io('https://top-seo-sockets.herokuapp.com');
	var socket = io('http://localhost:5000');

  $scope.socketjoinchat = function (id)
	 {
      //console.log('joinchat');
	 	socket.emit('join-chat', { senderId: '<?php echo $this->session->userdata['clientloggedin']['id']; ?>',receiverId : id });

   }

	 socket.on('typing', function(data)
	 {
		 //console.log(data);
			$scope.t = 1;
			$scope.typinguser = data.sendername;
	});

	socket.on('stoptyping', function(data)
	{
	  	//console.log(data);
			$scope.t = 0;
	});

	socket.on('deletemessage', function(data)
	{

		for(var v in $scope.messages[data.MSG_ROOMID])
		{
			if($scope.messages[data.MSG_ROOMID][v]['_id'] == data.id)
				{
					$scope.messages[data.MSG_ROOMID][v]['MSG_DELETE'] = data.MSG_DELETE;
				}

		}
		$scope.$apply();
		// console.log("MSG Deleted");
	});

	socket.on('updatemessage', function(data)
	{

		for(var v in $scope.messages[data.MSG_ROOMID])
		{
			if($scope.messages[data.MSG_ROOMID][v]['_id'] == data.id)
				{
					$scope.messages[data.MSG_ROOMID][v]['MSG_EDIT'] = 1;
					$scope.messages[data.MSG_ROOMID][v]['MSG_TEXT'] = data.MSG_TEXT;
				}

		}
		$scope.$apply();
		 //console.log("MSG Updated");
	});

	 $scope.updateTyping = function ()
	{
		var typingTimer = (new Date()).getTime()

		 var timeDiff    = typingTimer - $scope.lastTypingTime;
			if (!$scope.typing)
			{
				$scope.typing = true;
				//console.log('typing');
				socket.emit('startTyping', { roomId:$scope.roomId,sendername:$scope.username });
				// console.log($scope.roomId);
				// console.log($scope.username);
      //  console.log('typing...');
      //  console.log({ roomid:$scope.roomId,sendername:$scope.username });
			}

			$scope.lastTypingTime = (new Date()).getTime();

			$interval(function(){

				var typingTimer = (new Date()).getTime();
			 var timeDiff    = typingTimer - $scope.lastTypingTime;
			 if (timeDiff   >= $scope.typingLENGTH && $scope.typing) {
				 socket.emit('stopTyping', { roomId:$scope.roomId,sendername:$scope.username });
          $scope.t = 0;
				 $scope.typing = false;
			 }
				},$scope.typingLENGTH);
	}

	socket.on('messages', function(msg)
	{
		if(!$scope.messages[msg['MSG_ROOMID']])
		$scope.messages[msg['MSG_ROOMID']] = [];
    $scope.messages[msg['MSG_ROOMID']].push(msg);
		$scope.$apply();

	});



	$http.get("<?php echo base_url(); ?>freelancer/getsession")
	.then(function(response)
	{
		$scope.userId = response.data.userid;
		$scope.userType = response.data.type;
		$scope.username = response.data.name;
		$scope.userimage = response.data.image;
		// console.log($scope.userimage);
		$scope.getperson($scope.userId);

	});



	$scope.milestones.push({
		title : '',
		price : 0,
		task : [
			{
				task:'',
				hours:'',
				hourlyPrice:'',
				amount:'',
			}
		],
		button:'',
	});

	$scope.milestoneadd = function ($event)
	{

	$scope.milestones.push({
		title : '',
		price : 0,
		task : [
			{
				task:'',
				hours:'',
				hourlyPrice:'',
				amount:'',
			}
		],
		button:'',
	});

	}


	$scope.taskadd = function ($key)
	{
   $scope.milestones[$key]['task'].push({
  	task : '',
		hours:'',
		hourlyPrice:'',
		amount:'',
	 });

	}

	$scope.deletetask = function ($mkey,$key)
	{

		$scope.milestones[$mkey]['task'].splice($key,1);
		$scope.totalmilestone();
	}

	$scope.deletemilestone = function ($key)
	{
		//alert($key);
		$scope.milestones.splice($key,1);
		$scope.totalmilestone();
	}

	$scope.totalmilestone = function($event)
	{

		$scope.bid = 0;

		 for(var i in $scope.milestones )
		{
			 $scope.budget = 0;
			 for(var m in $scope.milestones[i]['task'])
			 {
				// console.log($scope.milestones[i]['task'][m]['amount']);
				$scope.budget = +$scope.budget + +$scope.milestones[i]['task'][m]['amount'];
			 }
			// console.log($scope.budget);
			$scope.milestones[i]['price'] = $scope.budget;
			$scope.bid = +$scope.bid + +$scope.milestones[i]['price'];
			$scope.offerTotal = $scope.bid;
		 }
	}

	$scope.submitproposal = function()
	{
		$scope.submitpro = true;
		var error = false;
    $scope.proposal = angular.element('#proposal').val();
		if($scope.proposal == ''  )
		{
			error = true;
		}


		 for( var res in $scope.milestones)
		 {
			if($scope.milestones[res]['title'] == '' || $scope.milestones[res]['price'] =='' )
			 {
				 error = true;
				}

					if($scope.milestones[res]['task'].length != 0)
					{
							for(var t in $scope.milestones[res]['task'])
							{
								 if($scope.milestones[res]['task'][t]['task'] == '' || $scope.milestones[res]['task'][t]['amount'] == '' || $scope.milestones[res]['task'][t]['hours'] == '' || $scope.milestones[res]['task'][t]['hourlyPrice'] == '')
								 {
									 error = true;
									}
								}
					 }
				}

	 if(error == true)
		{
		 return false;
		}

		var m = JSON.stringify({ jobId : $scope.offerId,proposalBid :$scope.offerTotal ,proposalDuration : $scope.time ,proposalDescription :$scope.proposal,milestones:$scope.milestones});

		angular.element(".preloader").show();
		 $http({
		 url: '<?php echo base_url(); ?>freelancer/jobMilestoneCreate',
		 method: "POST",
		 data: m,
		 headers: {
			'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			 }
		 }).then(function(response) {

			 angular.element(".preloader").hide();

			 if(response.data.message == "true")
				{
         $scope.person[$scope.selectedContact]['milestone'] = 1;
				 $scope.milestone = 1;
					angular.element("#milestone").modal('hide');
					$.notify("Milestone Created Successfully", "success");
        }

				 });
	}

	$scope.getperson = function (userId)
	{
		var d = JSON.stringify({ userId : userId });

		$http({
			url: '<?php echo base_url(); ?>freelancer/getperson',
			method: "POST",
			data: d,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response)
		{

			$scope.person = response.data.person;

			///  console.log($scope.person);
			if($scope.person && $scope.person.length != 0 )
			{
				if($scope.person[0]['fid'] != $scope.userId )
				{
					if(parseInt($scope.person[0]['fid']) < parseInt($scope.userId))
					{
						$scope.roomId = 'Room_'+scope.userId+'_'+$scope.person[0]['fid'];
					}
					else if(parseInt($scope.person[0]['fid']) > parseInt($scope.userId))
					{
						$scope.roomId = 'Room_'+$scope.person[0]['fid']+'_'+$scope.userId;
					}
					$scope.socketjoinchat($scope.person[0]['fid']);
					//console.log($scope.person[0]['cid']);
					$scope.selectchat(0,$scope.person[0]['fid'],'all',$scope.person[0]['friendId']);
				}
				else if($scope.person[0]['cid'] != $scope.userId )
				{
					if(parseInt($scope.person[0]['cid']) < parseInt($scope.userId))
					{
						$scope.roomId = 'Room_'+$scope.userId+'_'+$scope.person[0]['cid'];
					}
					else if(parseInt($scope.person[0]['cid']) > parseInt($scope.userId))
					{
						$scope.roomId = 'Room_'+$scope.person[0]['cid']+'_'+$scope.userId;
					}

					$scope.socketjoinchat($scope.person[0]['cid']);
					$scope.selectchat(0,$scope.person[0]['cid'],'all',$scope.person[0]['friendId']);
				}
				$scope.messages[$scope.roomId] = [];
				$scope.jobtitle = $scope.person[0]['jobtitle'];
				$scope.contractId = $scope.person[0]['contractId'];
				$scope.offerId = $scope.person[0]['jobOffer'];
				$scope.milestone = $scope.person[0]['milestone'];
				$scope.getchat($scope.roomId);

			}

			$scope.filterValue = 1;


		});
	}



	$scope.getmessage = function (id,type,userId,friendId)
	{
		//console.log(friendId);
		if(type != 'all')
		{

			var lastItem = $scope.messages[$scope.messages.length - 1];
			if(lastItem)
			{
				var  url      = '<?php echo base_url(); ?>freelancer/getmessage/'+id+'/'+friendId+'/'+userId+'/'+lastItem['id'];

			}
			else
			{
				var  url      = '<?php echo base_url(); ?>freelancer/getmessage/'+id+'/'+friendId+'/'+userId;

			}

		}
		else
		{

			var  url      = '<?php echo base_url(); ?>freelancer/getmessage/'+id+'/'+friendId+'/'+userId;

		}

		$http({
			url: url,
			method: "POST",
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {


			if(type == 'all')
			{
				response.data.results;
			}
			else
			{
				if(response.data.results.length != 0)
				{
					for (let i = 0; i < response.data.results.length; i++)
					{
						//$scope.messages.push(response.data.results[i])
						response.data.results[i];
					}
				}
			}
		});

	}

	$scope.selectchat = function (i,uid,type,friendid)
	{
		//console.log(friendid);
		$scope.selectedContact = i;
		$scope.selectedContactid = uid;
		$scope.selectedFriendid = friendid;
		$scope.offerId  = $scope.person[i]['jobOffer'];
		$scope.contractId = $scope.person[i]['contractId'];
		$scope.milestone = $scope.person[i]['milestone'];
    $scope.getmessage(uid,type,$scope.userId,friendid);
		$scope.jobtitle = $scope.person[i]['jobtitle'];
		$scope.selectedContactImage = $scope.person[i]['clogo'];
		$scope.socketjoinchat($scope.selectedContactid);

		if(parseInt($scope.selectedContactid) < parseInt($scope.userId))
		{
			$scope.roomId = 'Room_'+$scope.userId+'_'+$scope.selectedContactid;
		}
		else if(parseInt($scope.selectedContactid) > parseInt($scope.userId))
		{
			$scope.roomId = 'Room_'+$scope.selectedContactid+'_'+$scope.userId;
		}
		$scope.getchat($scope.roomId);
		$scope.messages[$scope.roomId] = [];


	}

	$scope.selectchat2 = function ()
	{
		//$scope.getmessage($scope.selectedContactid,'latest',$scope.userId,$scope.selectedFriendid);
	}

	$scope.request = function(id,status)
	{

		var friendId = $scope.person[id]['friendId'];
		var d = JSON.stringify({ friendId : friendId,friendStatus : status});

		$http({
			url: '<?php echo base_url(); ?>freelancer/friendrequest',
			method: "POST",
			data: d,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {

			if(response.data.message == "true")
			{
				if(response.data.status == 1)
				{
					$.notify("Request accepted successfully", "success");
				}
				else if(response.data.status == 2)
				{
					$.notify("Request Reject Successfully", "success");
				}

				$scope.person[id]['status'] = response.data.status;
			}

		});

	}



	$scope.sendmessage = function(uid,name,friendId)
	{
		error = false;
		var msgtext = angular.element('.msgtext').val();

		if($scope.userId =='' || uid == '' )
		{
			error = true;
		}

		if(msgtext == '' && $scope.attachment == '')
		{
			error = true;
		}
		// console.log(error);
		if(error == true)
		{
			return false;
		}

		// var m = JSON.stringify({ messageTo : uid ,friendId:friendId,messageFrom : $scope.userId,messagetext: msgtext ,messageAttachment : $scope.attachment });

		socket.emit('message', { MSG_SENTBYNAME:$scope.username,MSG_SENTBYIMAGE:$scope.userimage,MSG_SENTBY:$scope.userimage, MSG_SENTBY: '<?php echo $this->session->userdata['clientloggedin']['id']; ?>',MSG_SENTTONAME:name,  MSG_SENTTO : uid,MSG_SENTTOIMAGE:$scope.image,MSG_TEXT : msgtext,MSG_ATTACHMENT:$scope.attachment,MSG_ROOMID :$scope.roomId,MSG_SENTTOIMAGE:$scope.selectedContactImage ,MSG_DELETE : 0 ,MSG_EDIT: 0});
    angular.element('.msgtext').val('');
		$scope.attachment ='';

		// $http({
		// 	url: '<?php echo base_url(); ?>freelancer/messageSend',
		// 	method: "POST",
		// 	data: m ,
		// 	headers: {
		// 		'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
		// 	}
		// }).then(function(response) {
		//
		// 	if(response.data.message == "true")
		// 	{
		// 		$scope.attachment ='';
		// 		$scope.messages.push(response.data.result);
		// 		angular.element('.msgtext').val('');
		// 	}
		//
		// });

	}

	$scope.messageEdit = function(key,id)
	{
		$scope.edit = 1;
		$scope.editmsgId = id;
		$scope.editmsg = $scope.messages[$scope.roomId][key]['MSG_TEXT'];
		//console.log($scope.editmsg);
		$(".editmsg"+id).attr('contenteditable','true');
		$(".editmsg"+id).addClass("editedmsg");
	}

	$scope.messageUpdate = function(type,id)
	{
		if(type == "update")
		{
			var msg = $(".editmsg"+id).text();

			//var m = JSON.stringify({ messageId : id ,messagetext: msg  });

			if(msg != '' )
			{

				socket.emit('updatemessage', { id:$scope.editmsgId,MSG_TEXT:msg,MSG_ROOMID:$scope.roomId,MSG_EDIT:1});
				$scope.edit = '';
			 	$scope.editmsgId = '';
		   	$(".editmsg"+id).attr('contenteditable','false');
				$(".editmsg"+id).removeClass("editedmsg");
				// $http({
				// 	url: '<?php echo base_url(); ?>freelancer/messageUpdate',
				// 	method: "POST",
				// 	data: m ,
				// 	headers: {
				// 		'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
				// 	}
				// }).then(function(response) {
				//
				// 	if(response.data.message == "true")
				// 	{
				// 		$scope.messages[key]['message'] = msg;
				// 		$scope.messages[key]['edited'] = 1;
				// 		$scope.edit = '';
				// 		$scope.editmsgId = '';
				// 		$(".editmsg"+id).attr('contenteditable','false');
				// 		$(".editmsg"+id).removeClass("editedmsg");
				// 	}
				//
				// });
			}

		}
		else if(type == "cancel")
		{
			$(".editmsg"+id).text($scope.editmsg);
			$scope.edit = '';
			$scope.editmsgId = '';
			$(".editmsg"+id).attr('contenteditable','false');
			$(".editmsg"+id).removeClass("editedmsg");
		}

	}

	$scope.messageDelete = function(key,id)
	{
		//console.log(id);
		socket.emit('deletemessage', { id:id,MSG_DELETE:1,MSG_ROOMID:$scope.roomId});

		// var m = JSON.stringify({ messageId : id  });

		// $http({
		// 	url: '<?php echo base_url(); ?>freelancer/messageDeleted',
		// 	method: "POST",
		// 	data: m ,
		// 	headers: {
		// 		'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
		// 	}
		// }).then(function(response) {
		//
		// 	if(response.data.message == "true")
		// 	{
		// 		$scope.messages[key]['deleted'] = 1;
		// 	}
		//
		// });
	}

	 $scope.deleteAttachment = function ()
	 {
		 $scope.attachment ='';
	 }

	/// attchment upload
	$scope.chatAttachment = function ($event) {
     $scope.attch = true;
		var files =$event.files;
		for (var i = 0; i < files.length; i++) {
			var f = files[i]
			var fileName = files[i].name;
			var filePath = fileName;
      //console.log(filePath);
			var fileReader = new FileReader();
			fileReader.onload = (function(e) {
				var d = JSON.stringify({ image :  e.target.result,name : filePath });
				$http({
					url: '<?php echo base_url(); ?>chatAttachment',
					method: "POST",
					data: d,
					headers: {
						'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
					}
				}).then(function(response) {
						$scope.attachment = response.data;
						$scope.attch = false;
				});

			});
			fileReader.readAsDataURL(f);
		}

	}
	/// attchment upload

	///person filter
	// chat person filter
	$scope.personFilter = function()
	{

		var d = JSON.stringify({ filter :  $scope.filterValue ,userId:$scope.userId });
		$scope.person = [];
		$http({
			url: '<?php echo base_url(); ?>freelancer/chatpersonFilter',
			method: "POST",
			data: d,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {

			$scope.person = response.data.person;

			if($scope.person && $scope.person.length != 0 )
			{
				if($scope.person[0]['fid'] != $scope.userId )
				{
					//  console.log("freelancer");
					$scope.selectchat(0,$scope.person[0]['fid'],'all',$scope.person[0]['friendId']);
				}
				else if($scope.person[0]['cid'] != $scope.userId )
				{
					//  console.log("client");
					$scope.selectchat(0,$scope.person[0]['cid'],'all',$scope.person[0]['friendId']);
				}
			}

		});

	}

  $scope.getchat = function(roomId)
	{
		 $scope.messages[roomId] = [];
	 // var m = JSON.stringify({ roomId :roomId});
	 $http({
	 url: 'http://localhost:5000/get-firm-messages?roomId='+roomId,
	 method: "GET",
	 headers: {
		'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
		 }
	 }).then(function(response) {


       if(response.data.messages.length != 0)
			 {
		   if(!$scope.messages[response.data.messages[0]['MSG_ROOMID']])
 		   $scope.messages[response.data.messages[0]['MSG_ROOMID']] = [];
       $scope.messages[response.data.messages[0]['MSG_ROOMID']] = response.data.messages.reverse();
       //console.log($scope.messages);
		   }
	   
			 });
		 }


		 // get last message


	$scope.lastMessages = function()
	{

	$http({
	url: 'http://localhost:5000/last-msg?com='+$scope.roomId+'&&skip='+$scope.messages[$scope.roomId].length+'&&limit=10',
	method: "POST",
	//data: m,
	headers: {
	 'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
		}
	}).then(function(response) {
		if(response.data == "message")
		{

		  if(response.data.messages.length != 0)
		  {
			var msg = response.data.messages;
			var msg1 = msg.reverse();
			 $scope.messages[$scope.roomId].unshift(...msg1);

       }
		 }
			   });
	  }

	///person filter end
});
///////jobs
var app3 = angular.module('myApp3', [])

app3.filter('underscoreless', function () {
	return function (input) {
		//console.log(input);
		return input.split(' ').join('-');

	};
});

app3.filter('trustAsHtml',['$sce', function($sce) {

		 return function(text) {

			 return $sce.trustAsHtml(text);
					};
	 }]);



app3.controller('myCtrt3', function($scope,$window,$http) {

	$scope.user ='';
	$scope.page = 1;
	$scope.jobs = [];
	$scope.total = 0;
	$scope.message='';



	$http.get("<?php echo base_url(); ?>freelancer/getsession")
	.then(function(response)
	{

		$scope.user = response.data.userid;
		$scope.job($scope.user);
	});


	$scope.job = function (id)
	{
		var obj = {  page : $scope.page,userid:id }

		$http({
			url: '<?php echo base_url(); ?>freelancer/getjobs',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {

			$scope.jobs = response.data.result;
			$scope.total = response.data.pcount;
        //console.log($scope.total);
			if($scope.page == 1)
			$scope.pagination($scope.total);
		});
	}

	$scope.pagination = function ($event)
	{
		if($scope.total > 10)
		{
				$('#pagination').pagination({
					items: $event,
					itemsOnPage: 10,
					cssStyle: 'light-theme',
					onPageClick:  function (e) {
						$scope.page  = e;
						$scope.job();
					}
				});
		 }
	}
	//job status
	$scope.offerStatus = function($offerid,$jobId,$user,$from,$status)
	{
		if($status == '1')
		{
			angular.element(".jtitle").html("Job Offer Accepted");
			angular.element("#accept").modal('show');
		}
		else if($status == '2')
		{
			angular.element(".jtitle").html("Job Offer Rejected");
			angular.element("#accept").modal('show');
		}
		angular.element(".offerId").val($offerid);
		angular.element(".jobId").val($jobId);
		angular.element(".userId").val($user);
		angular.element(".from").val($from);
		angular.element(".status").val($status);
	}

	//job status

	//job message
	$scope.offermessage = function()
	{

		$scope.msgSubmit = true;
		var error = false;
		var offerid	= angular.element(".offerId").val();
		var jobId = angular.element(".jobId").val();
		var user	= angular.element(".userId").val();
		var from =	angular.element(".from").val();
		var message =	angular.element(".message").val();
		var status = angular.element(".status").val();
		if(message == '' || offerid == ''  || user == '' || from == '' || jobId == '')
		{
			error = true;
		}

		if(error == true)
		{
			return false;
		}


		var obj = {  offerId : offerid,user:user,from:from,message:message,jobId:jobId,status:status }
		angular.element(".preloader").show();
		$http({
			url: '<?php echo base_url(); ?>freelancer/jobMesaage',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
			angular.element(".preloader").hide();
			if(response.data.message == "true")
			{

				$.notify("Message Send Successfully", "success");
			}
			else if(response.data.message == "false")
			{
				$.notify("Message Not Send", "error");
			}
			angular.element("#accept").modal('hide');
			angular.element(".modal-backdrop").hide();
			$scope.job(user);
		});
	}
	//job message
	$scope.job($scope.user);
});

// job details

var app5 = angular.module('myApp5', [])


app5.filter('trustAsHtml',['$sce', function($sce) {

		 return function(text) {

			 return $sce.trustAsHtml(text);
					};
	 }]);

app5.controller('myCtrt5', function($scope,$window,$http) {

	$scope.users ='';
	$scope.job = [];
	$scope.message1='';
	$scope.messageTo ='';
	$scope.messagetext ='';




	$http.get("<?php echo base_url(); ?>freelancer/getsession")
	.then(function(response)
	{

		$scope.users = response.data.userid;

	});


	$scope.jobdetail = function ($id)
	{
		var obj = {  id : $id }

		$http({
			url: '<?php echo base_url(); ?>freelancer/getjobdetail',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {

			$scope.job = response.data.result;

		});
	}

	$scope.messageSend = function ()
	{
		$scope.msgSubmit = true;
		var error = false;
		$scope.messagetext = angular.element('#messagetext').val();

		if($scope.messagetext == '' )
		{
			error = true;
		}

     if(error == true)
		{
			return false;
		}

	var obj = { messageTo:$scope.job.offFrom,messageFrom :$scope.job.offTo ,message:$scope.messagetext,jobId:$scope.job.jobId }
		angular.element(".preloader").show();
		$http({
			url: '<?php echo base_url(); ?>freelancer/messageToClient',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
			angular.element(".preloader").hide();
			if(response.data.message == "true")
			{
				angular.element('#messagetext').val('');
        $.notify("Message Send Successfully", "success");
			}
			else if(response.data.message == "false")
			{
				$.notify("Message Not Send", "error");
			}
			angular.element("#message").modal('hide');
			angular.element(".modal-backdrop").hide();

		});
	}

	//job status
	$scope.offerStatus1 = function($offerid,$jobId,$user,$from,$status)
	{
		//console.log($jobId);
		if($status == '1')
		{
			angular.element(".jtitle").html("Job Offer Accepted");
			angular.element("#accept").modal('show');
		}
		else if($status == '2')
		{
			angular.element(".jtitle").html("Job Offer Rejected");
			angular.element("#accept").modal('show');
		}
		angular.element(".offerId").val($offerid);
		angular.element(".jobId").val($jobId);
		angular.element(".userId").val($user);
		angular.element(".from").val($from);
		angular.element(".status").val($status);
	}

	//job status

	//job message
	$scope.offermessage1 = function()
	{
  //  console.log('fdssssss');
		$scope.msgSubmit = true;
		var error = false;
		var offerid	= angular.element(".offerId").val();
		var jobId = angular.element(".jobId").val();
		var user	= angular.element(".userId").val();
		var from =	angular.element(".from").val();
		var message =	angular.element(".message").val();
		var status = angular.element(".status").val();
		if(message == '' || offerid == ''  || user == '' || from == '' || jobId == '')
		{
			error = true;
		}



		if(error == true)
		{
			return false;
		}


		var obj = {  offerId : offerid,user:user,from:from,message:message,jobId:jobId,status:status }
		angular.element(".preloader").show();
		$http({
			url: '<?php echo base_url(); ?>freelancer/jobMesaage',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
			angular.element(".preloader").hide();
			if(response.data.message == "true")
			{
        $.notify("Message Send Successfully", "success");
			}
			else if(response.data.message == "false")
			{
				$.notify("Message Not Send", "error");
			}
			angular.element("#accept").modal('hide');
			angular.element(".modal-backdrop").hide();
			$scope.jobdetail(user);
		});
	}
	//job message
	$scope.jobdetail(<?php if(!empty($id)){ echo $id; } ?>);
});
//job details


//////////// contarct
var app6 = angular.module('myApp6', [])

app6.filter('underscoreless', function () {
	return function (input) {
		//console.log(input);
		return input.split(' ').join('-');

	};
});

app6.filter('trustAsHtml',['$sce', function($sce) {

		 return function(text) {

			 return $sce.trustAsHtml(text);
					};
	 }]);

app6.controller('myCtrt6', function($scope,$window,$http) {

	$scope.page = 1;
	$scope.contracts = [];
	$scope.total = 0;


	$http.get("<?php echo base_url(); ?>freelancer/getsession")
	.then(function(response)
	{

		$scope.user = response.data.userid;
		$scope.contract($scope.user);
	});

	$scope.contract = function ($id)
	{
		var obj = {  page : $scope.page , freelancer : $id }

		$http({
			url: '<?php echo base_url(); ?>freelancer/getcontract',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {

			$scope.contracts = response.data.result;
			$scope.total = response.data.pcount;

			if($scope.page == 1)
			$scope.pagination($scope.total);
		});
	}

	$scope.pagination = function ($event)
	{
		if($scope.total > 10)
		{
				$('#pagination').pagination({
					items: $event,
					itemsOnPage: 10,
					cssStyle: 'light-theme',
					onPageClick:  function (e) {
						$scope.page  = e;
						$scope.contract();
					}
				});
		 }
	}
	$scope.contract($scope.user);
});


////////////contract


////////////contract detail

var app7 = angular.module('myApp7', ['luegg.directives'])

app7.filter('date', function () {
			return function (item) {
				var dates = new Date(Date.parse(item))
				var newDate = '' + dates.getDate() + '-' + (dates.getMonth() + 1) + '-' + dates.getFullYear();
				return newDate;
			};
		});

app7.filter('trustAsHtml',['$sce', function($sce) {

			return function(text) {

				return $sce.trustAsHtml(text);
		       };
		}]);


  app7.filter('htmlToPlaintext', function() {
    return function(text) {
      return  text ? String(text).replace(/<[^>]+>/gm, '') : '';
    };
  });


		app7.filter('time', function () {

		 return function (item) {
		 var dates = new Date(Date.parse(item))
		 var minutes = dates.getMinutes();

		 if(minutes > 10)
		 {
			 var time = '' + dates.getHours() + ':' + dates.getMinutes();
		 }

			else
		 {
			 var time = '' + dates.getHours() + ':'+'0'+dates.getMinutes();
			}

			return time;
		 };
	 });

app7.controller('myCtrt7', function($scope,$window,$http) {

	    $scope.glued = true;

			$scope.contracts = [];
			$scope.mid ='';
			$scope.message ='';
			$scope.clientId ='';
			$scope.key ='';
			$scope.status ='';
			$scope.jobId ='';
			$scope.reason ='';
			$scope.rating ='';
			$scope.communication = 1;
			$scope.skill = 1;
			$scope.responsiveness = 1;
			$scope.quality = 1;
			$scope.achieved = 1;
			$scope.rehire =1;
			$scope.availability =1;
			$scope.deadline =1;
			$scope.cooperation =1;

			$scope.cost = 1;
			$scope.overall = 1;
			$scope.contractId = '';
			$scope.allreview ='';
			$scope.userreview ='';
			$scope.activity =[];
			$scope.c ='';
			$scope.end = [];



	  $scope.contractdetail = function ($id)
	  {
		  var obj = {  id : $id }

				$http({
					url: '<?php echo base_url(); ?>freelancer/getcontractdetail',
					method: "POST",
					data: obj,
					headers: {
						'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
					}
				}).then(function(response) {

					$scope.contracts = response.data.result;

					for(var c in $scope.contracts.milestone)
					{
						if($scope.contracts.milestone[c].milestoneStatus == 4)
						{
							 $scope.end.push('1');
						}
					}

					$scope.getallreview($scope.contracts['contractId']);
					$scope.getuserreview($scope.contracts['contractId']);
					$scope.getlog($scope.contracts['jobId']);
		     });
	   }

		 $scope.removehtml = function(text)
		 {

		       return  text ? String(text).replace(/<[^>]+>&nbsp;/gm, '') : '';


		 }

	 $scope.milestoneRequest = function(key,id,clientId)
	 {
				$scope.mid = id;
				$scope.clientId = clientId;
				$scope.key = key;

				angular.element("#request").modal('show');
   }

	 $scope.comment = function(id)
	 {

		 $(".comment").hide();
		 $(".cbt").hide();
		 $(".comment"+id).attr('contenteditable','true');
		 $(".comment"+id).show();
		 $(".cbtn"+id).show();
	 }

	 $scope.submitcomment = function(id,rid)
	 {
		// console.log(id);
     var text1 = angular.element(".comment"+id).html();
      var text = $scope.removehtml(text1);
			//console.log(text);
		 if(text != '')
		 {
				var obj = {  logText : text,logReference : id }
			 $http({
				 url: '<?php echo base_url(); ?>freelancer/logcomment',
				 method: "POST",
				 data: obj,
				 headers: {
					 'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
				 }
			 }).then(function(response) {
				 angular.element(".preloader").hide();
				 if(response.data.message == "true")
				 {

					 $.notify("Comment  Successfully Added", "success");
					 var text = angular.element(".comment"+id).html('');
					 $(".comment").hide();
					 $(".cbt").hide();
					 $scope.getlog($scope.contracts['jobId']);
				 }
		 });

	   }
   }

	 $scope.requestsend = function()
	 {
				$scope.msgSubmit = true;
				var error = false;
				$scope.message =	angular.element("#message").val();

				if($scope.message == '' || $scope.mid == '' || $scope.clientId == '')
				{
					error = true;
				}

				if(error == true)
				{
					return false;
				}


				var obj = {  milestoneId : $scope.mid,message:$scope.message,clientId:$scope.clientId }
				angular.element(".preloader").show();
				$http({
					url: '<?php echo base_url(); ?>freelancer/milestoneRequest',
					method: "POST",
					data: obj,
					headers: {
						'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
					}
				}).then(function(response) {
					angular.element(".preloader").hide();
					if(response.data.message == "true")
					{

						$.notify("Request Send Successfully", "success");
					}
					else if(response.data.message == "false")
					{
						$.notify("Message Not Send", "error");
					}
					angular.element("#request").modal('hide');
					$scope.contracts['milestone'][$scope.key]['milestoneStatus'] = 2;
					$scope.getlog($scope.contracts['jobId']);
					$scope.contractdetail(<?php if(!empty($contract)){ echo $contract; } ?>);


				});
	}

	  $scope.endcontract = function(contractId,clientId)
	  {
		  $scope.contractId = contractId;
		  $scope.c = clientId;
			//console.log($scope.c);
		  angular.element("#contractend").modal('show');
    }



		$scope.submitContractReview = function()
	  {

				  $scope.msgSubmit = true;
				  var error = false;
				  $scope.review =	angular.element("#review").val();
				  $scope.reason = angular.element("#reason").val();


				  if($scope.contractId == '' || $scope.c == ''  || $scope.reason == '' || $scope.rating == '' || $scope.review =='')
				  {
					  error = true;
				  }

				  if(error == true)
				  {
					  return false;
				  }


				var obj = { jobId :$scope.contracts.jobId, contractId : $scope.contractId,overall:$scope.rating,clientId:$scope.c,communication : $scope.communication,skill:$scope.skill,deadline:$scope.deadline,quality:$scope.quality,cooperation:$scope.cooperation,review:$scope.review,rehire:$scope.rehire,cost:$scope.cost,availability:$scope.availability,total:$scope.overall }
				angular.element(".preloader").show();
				$http({
					url: '<?php echo base_url(); ?>freelancer/review',
					method: "POST",
					data: obj,
					headers: {
						'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
					}
				}).then(function(response) {
					angular.element(".preloader").hide();

					 if(response.data.message == "true")
					 {
						$.notify("Review Successfully Submit", "success");
						$scope.contracts['contractStatus'] = 2;
						$scope.getuserreview();
						$scope.contractdetail(<?php if(!empty($contract)){ echo $contract; } ?>);

					 }

					angular.element("#contractend").modal('hide');

			  	});

		}


		$scope.starrating = function(type,val)
	  {
			if(type == "comm")
			{
			 $scope.communication = val;
			}

		 else if(type == "skill")
		 {
			 $scope.skill = val;
		 }

		 else if(type == "res")
		 {
			$scope.responsiveness = val;
		 }

		 else if(type == "quality")
		 {
			$scope.quality = val;
		 }

		 else if(type == "rehire")
		 {
			$scope.rehire = val;
		 }
		 else if(type == "availability")
		 {
			 $scope.availability = val;
		 }

		 else if(type == "deadline")
		 {
		 $scope.deadline = val;
		 }

		 else if(type == "cooperation")
		 {
			 $scope.cooperation = val;
		 }

		else if(type == "schedule")
		{
		 $scope.schedule = val;
		}

		else if(type == "cost")
		{
		 $scope.cost = val;
		}


		var add = parseFloat($scope.communication * 0.20) + parseFloat($scope.skill * 0.40) + parseFloat($scope.rehire * 0.40) + parseFloat($scope.quality * 0.20) + parseFloat($scope.availability * 0.20) + parseFloat($scope.deadline * 0.20) + parseFloat($scope.cooperation * 0.20) +  parseFloat($scope.cost * 0.20);

		$scope.overall  = add;


	}

	 $scope.overallrating = function($event)
	 {
     	if($event.target.checked ==  true)
		  {
			 $scope.rating = $event.target.value;
		  }
	 }

	 $scope.getallreview = function(id)
	 {
     var obj = {  contractId : $scope.contracts['contractId'] }
		 $http({
			 url: '<?php echo base_url(); ?>freelancer/getreview',
			 method: "POST",
			 data: obj,
			 headers: {
				 'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			 }
		 }).then(function(response) {

				if(response.data.message == "true")
				{
          $scope.allreview = response.data.result;
        }

         });
     }

		 $scope.getuserreview = function(id)
		 {
	     var obj = {  contractId : $scope.contracts['contractId'] }
			 $http({
				 url: '<?php echo base_url(); ?>freelancer/getfreelancerReview',
				 method: "POST",
				 data: obj,
				 headers: {
					 'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
				 }
			 }).then(function(response) {

					if(response.data.message == "true")
					{
	          $scope.userreview = response.data.result;
	        }

	         });
	     }

			 $scope.taskcheck = function($event,id)
			 {
				 if($event.target.checked == true)
				 {
					 var status = 1;
				 }
				 else
				 {
				   var status = 0;
				 }
				 var obj = {  logReference : id,logStatus:status }
				 $http({
					 url: '<?php echo base_url(); ?>freelancer/taskRequest',
					 method: "POST",
					 data: obj,
					 headers: {
						 'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
					 }
				 }).then(function(response) {

						if(response.data.message == "true")
						{
							$.notify("Task Request Successfully Added", "success");
              $scope.getlog($scope.contracts['jobId']);
						}

						 });
			 }

			 $scope.getlog = function (contractId,milestone = null,task = null)
			 {
				 //console.log($scope.contracts);
				   if(milestone)
					 {
						 	var  url= '<?php echo base_url(); ?>freelancer/getlog/contract/'+contractId+'/'+milestone;
					 }
					 else if(task)
					 {
						 var  url= '<?php echo base_url(); ?>freelancer/getlog/contract/'+contractId+'/'+milestone+'/'+task;
					 }
					 else
					 {
						 var  url= '<?php echo base_url(); ?>freelancer/getlog/contract/'+contractId;
					 }
					 $http({
						 url: url,
						 method: "POST",
						 headers: {
							 'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
						 }
					 }).then(function(response) {

							if(response.data.message == "true")
							{
			          $scope.activity = response.data.result;
								//console.log($scope.activity);
			        }

			         });

			 }

	$scope.contractdetail(<?php if(!empty($contract)){ echo $contract; } ?>);

	//$scope.getlog();
  //$scope.getreview();
});
// end contract


//// notification
var app8 = angular.module('myApp8', [])

app8.filter('date', function () {
	return function (item) {
		var dates = new Date(Date.parse(item))
		var newDate = '' + dates.getDate() + '-' + (dates.getMonth() + 1) + '-' + dates.getFullYear();
		return newDate;
	};
});

app8.controller('myCtrt8', function($scope,$window,$http,$interval) {
	$scope.notify = [];
	$scope.total = 0;
	$scope.count = 0;
	$scope.page = 1;
	$scope.unread = 0;
	$scope.noti =[];
	$scope.user ='';

	$http.get("<?php echo base_url(); ?>freelancer/getsession")
	.then(function(response)
	{

		$scope.user = response.data.userid;
		var id = null;
		$scope.notification(id,$scope.userid);
	});

	$scope.notification = function (id = null,userId)
	{
		var obj = {  page : $scope.page ,id : $scope.user };
		if(id )
		obj['lastid'] = id;

		$http({
			url: '<?php echo base_url(); ?>freelancer/getnotification',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {

			if(id == null)
			{
				$scope.notify = response.data.result;
				$scope.total = response.data.pcount;
			}
			else
			{
				$scope.unread = 0;
				if(response.data.result.length != 0)
				{
					for (let i = 0; i < response.data.result.length; i++)
					{

						$scope.notify.unshift(response.data.result[i]);
					}
					$scope.total =	$scope.total + response.data.pcount;
				}
			}

			for(var v in $scope.notify)
			{
				if($scope.notify[v]['notificationStatus'] == 0)
				{
					$scope.unread += $scope.notify[v]['notificationStatus'].length;

				}

			}
			// console.log($scope.unread);

			if($scope.page == 1)
			$scope.pagination($scope.total);
		});
	}

	$scope.pagination = function ($event)
	{
		if($scope.total > 10)
		{
				$('#pagination').pagination({
					items: $event,
					itemsOnPage: 10,
					cssStyle: 'light-theme',
					onPageClick:  function (e) {
						$scope.page  = e;
						$scope.notification();
					}
				});
		 }
	}

	$scope.singleNotification = function(key,id)
	{

		var obj = {  id : id }
		angular.element(".preloader").show();
		$http({
			url: '<?php echo base_url(); ?>freelancer/getOneNotification',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
			angular.element(".preloader").hide();
			if(response.data.message == "true")
			{
				$scope.notify[key]['notificationStatus'] = 1;
				$scope.noti = response.data.result;
				angular.element("#notification").modal('show');
			}

			//$scope.notification();
		});

	}

	$interval(function(){

		$http.get("<?php echo base_url(); ?>account/inc/session.php")
		.then(function(response)
		{

			$scope.user = response.data.result;
			$scope.notification($scope.notify[0]['notificationId'],$scope.user);
		});
	},10000);

	$scope.notification();
});
//// notification

///profile

var app9 = angular.module('myApp9', [])

app9.directive('numbersOnly', function() {
    return {
        require: 'ngModel',
        link: function(scope, element, attrs, modelCtrl) {
            modelCtrl.$parsers.push(function(inputValue) {
                if (inputValue == undefined) return ''
                var onlyNumeric = inputValue.replace(/[^0-9]/g, '');
                if (onlyNumeric != inputValue) {
                    modelCtrl.$setViewValue(onlyNumeric);
                    modelCtrl.$render();
                }
                return onlyNumeric;
            });
        }
    };
   });

	 app9.directive('mydatepicker', function () {
	 return {
	     restrict: 'A',
	     require: 'ngModel',
	      link: function (scope, element, attrs, ngModelCtrl) {
	         element.datepicker({
	             dateFormat: 'd-m-yy',
	             onSelect: function (date) {
	                 scope.date = date;
	                 scope.$apply();
	             }
	         });
	     }
	   };
	 });

app9.controller('myCtrt9', function($scope,$window,$http) {

	$scope.profile = [];
	$scope.country1 = [];
	$scope.st = [];
	$scope.ci = [];
	$scope.name ='';
	$scope.logo ='';
	$scope.phone ='';
	$scope.zip ='';
	$scope.address1 ='';
	$scope.address2 ='';
	$scope.country ='';
	$scope.state = '';
	$scope.city ='';
	$scope.about ='';
	$scope.website ='';
	$scope.skype ='';
	$scope.facebookLink ='';
	$scope.linkedlnLink ='';
	$scope.minPrice ='';
	$scope.maxPrice ='';
	$scope.year ='';
	$scope.desig ='';
	$scope.cname ='';

	$scope.datepickerOptions = {
    datepickerMode:"'year'",
    minMode:"'year'",
    minDate:"minDate",
    showWeeks:"false",
 };

	$http({
		url: '<?php echo base_url(); ?>freelancer/getprofile',
		method: "POST",
		headers: {
			'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
		}
	}).then(function(response) {

		$scope.profile = response.data.result;
		$scope.st = response.data.states;
		$scope.ci = response.data.city;

	});

	$http({
		url: '<?php echo base_url(); ?>freelancer/getcountry',
		method: "POST",
		headers: {
			'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
		}
	}).then(function(response) {

		$scope.country1 = response.data.result;


	});


	$scope.profileupdate = function ()
	{
		$scope.submitprofile = true;
		var error = false;
		$scope.profile.name =  angular.element("#name").val();
		$scope.profile.zip = angular.element("#zip").val();
		$scope.profile.phone = angular.element("#phone").val();
		$scope.profile.country = angular.element("#country").val();
		$scope.profile.state = angular.element("#states").val();
		$scope.profile.city = angular.element("#city").val();
		$scope.profile.address1 = angular.element("#address1").val();
		$scope.profile.address2 = angular.element("#address2").val();
		$scope.profile.about = CKEDITOR.instances['about'].getData();
		$scope.profile.website = angular.element("#website").val();
		$scope.profile.skype = angular.element("#skype").val();
		$scope.profile.facebookLink = angular.element("#facebook").val();
		$scope.profile.linkedlnLink = angular.element("#linked").val();
		$scope.profile.minPrice = angular.element("#minPrice").val();
		$scope.profile.maxPrice = angular.element("#maxPrice").val();
    $scope.profile.desig = angular.element("#desig").val();
		$scope.profile.year = angular.element("#year").val();
		$scope.profile.c_name = angular.element("#companyname").val();

		if($scope.profile.name == '' || $scope.profile.phone == '' || $scope.profile.zip == '' || $scope.profile.country == '' || $scope.profile.state == '' || $scope.profile.city == '' || $scope.profile.desig == '' || $scope.profile.year == '')
		{
			error = true;
		}


		if($scope.profile.address1 == '' || $scope.profile.address2 == '' || $scope.profile.about == '' || $scope.profile.website == '' || $scope.profile.minPrice == '' || $scope.profile.maxPrice == '' || $scope.profile.c_name =='' || $scope.profile.logo == '' )
		{
			error = true;
		}
		//console.log(error);
		if(error == true )
		{
			return false;
		}

		var obj = {  name : $scope.profile.name , zip : $scope.profile.zip ,logo : $scope.profile.logo , rep_ph_num : $scope.profile.phone ,country : $scope.profile.country,state : $scope.profile.state ,city : $scope.profile.city,address1 : $scope.profile.address1,address2 : $scope.profile.address2,about : $scope.profile.about,website : $scope.profile.website,skype : $scope.profile.skype,facebookLink : $scope.profile.facebookLink , linkedlnLink : $scope.profile.linkedlnLink ,desig: $scope.profile.desig ,year:$scope.profile.year,c_name: $scope.profile.c_name ,minPrice:$scope.profile.minPrice,maxPrice:$scope.profile.maxPrice };

		$http({
			url: '<?php echo base_url(); ?>freelancer/profileupdate',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {

			if(response.data.message == "true")
			{
				$.notify("Profile Update Successfully", "success");
			}


		});
	}

	$scope.getstate = function ($event)
	{
		var  id = angular.element($event).val();
		//console.log(id);

		var obj = {  id : id  };

		$http({
			url: '<?php echo base_url(); ?>freelancer/getstate',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {

			$scope.st = response.data.result;
		});
	}

			$scope.getcity = function ($event)
			{
				var  id = angular.element($event).val();

				var obj = {  id : id  };

				$http({
					url: '<?php echo base_url(); ?>freelancer/getcity',
					method: "POST",
					data: obj,
					headers: {
						'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
					}
				}).then(function(response) {

					$scope.ci = response.data.result;
				});
			}

	////logo upload
	$scope.logoupload = function ($event) {

		var files =$event.files;
		for (var i = 0; i < files.length; i++) {
			var f = files[i]
			var fileName = files[i].name;
			var filePath = fileName;

			var fileReader = new FileReader();
			fileReader.onload = (function(e) {
				//jQuery('#logoview').show();
				jQuery('#logoview').attr('src',e.target.result);
				var d = JSON.stringify({ image :  e.target.result });
				$http({
					url: '<?php echo base_url(); ?>freelancer/logoupload',
					method: "POST",
					data: d,
					headers: {
						'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
					}
				}).then(function(response) {
					$scope.logo = response.data;
          $scope.profile.logo = response.data;
				});

			});
			fileReader.readAsDataURL(f);
		}

	}
	/// logo upload




});

////profile end

////services start
var app10 = angular.module('myApp10', [])


app10.controller('myCtrt10', function($scope,$window,$http) {
	$scope.industry = [];
	$scope.services = [];
	$scope.selectedIndustry = [];
	$scope.selectedService = [];




	$http({
		url: '<?php echo base_url(); ?>freelancer/getindustry',
		method: "POST",
		headers: {
			'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
		}
	}).then(function(response){

		$scope.industry = response.data.result;
	});



	$scope.getuserservice = function()
	{
		$http({
			url: '<?php echo base_url(); ?>freelancer/userservices',
			method: "POST",
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
			if(response.data.message == "true")
			{

				$scope.selectedService = response.data.service;
			}
		});
	}

	$scope.getuserIndustry = function()
	{

		$http({
			url: '<?php echo base_url(); ?>freelancer/userindustry',
			method: "POST",
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
			if(response.data.message == "true")
			{
        $scope.selectedIndustry = response.data.industry;
				$scope.getservice();

			}
		});
	}

	$scope.getservice = function()
	{
		//console.log($scope.selectedIndustry);
		var obj = {  id :$scope.selectedIndustry   };

	$http({
		url: '<?php echo base_url(); ?>client-getservices',
		method: "POST",
		data:obj,
		headers: {
			'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
		}
	}).then(function(response) {

		$scope.services = response.data.result;

		});
}

	$scope.industryclick = function ($event)
	{
		angular.element("#prac_areas_chosen").addClass('chosen-with-drop chosen-container-active');
		angular.element('.industry').removeAttr('placeholder');

	}

	$scope.selectIndustry = function (key)
	{
		  // angular.element("#prac_areas_chosen").removeClass('chosen-with-drop chosen-container-active');
			$scope.getservice();

		var inds =  {};
		inds['name'] = $scope.industry[key]['name'];
		inds['id'] = $scope.industry[key]['id'];

		 //console.log($scope.selectedIndustry);
		 var match = false;
       for(var v in $scope.selectedIndustry)
		   {
			  if($scope.selectedIndustry[v]['id'] == inds['id'] )
			   {
					  match = true;
				  }

		   }

			 if($scope.selectedIndustry.length >= 2)
			 {
				 match = true;
			 }


			 if(!match)
			 {
			 $scope.selectedIndustry.push(inds);
		   }

	}



	$scope.removeIndustry = function(key)
	{

		var obj = { industryId: $scope.selectedIndustry[key].id  };
		angular.element(".preloader").show();
		$http({
			url: '<?php echo base_url(); ?>freelancer/deleteService',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
			if(response.data.message == "true")
			{
				angular.element(".preloader").hide();

			 $scope.selectedIndustry.splice(key,1);
			 //remove industry

			}
		});

	}


	// service start
	$scope.serviceclick = function()
	{
		//console.log('addservice');
		angular.element("#ser_chosen").addClass('chosen-with-drop chosen-container-active');
		angular.element('.services').removeAttr('placeholder');

	}

	$scope.selectService = function (key)
	{

		var ser =  {};
		ser['name'] = $scope.services[key]['name'];
		ser['id'] = $scope.services[key]['id'];

      var  match = false;
		 	for(var v in $scope.selectedService)
		   {
		 	    if ($scope.selectedService[v]['id'] == ser['id'] )
		 	    {

					     match = true;

					}
		   }

			 if($scope.selectedService.length >= 2)
			 {
				 match = true;
			 }

			 if(!match)
        {
					console.log("added");
					$scope.selectedService.push(ser);
				}
	//angular.element("#ser_chosen").removeClass('chosen-with-drop chosen-container-active');
	}




	$scope.removeService = function(key)
	{
		var obj = { serviceId: $scope.selectedService[key].id  };
		angular.element(".preloader").show();
		$http({
			url: '<?php echo base_url(); ?>freelancer/deleteService',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
			if(response.data.message == "true")
			{
				angular.element(".preloader").hide();

				$scope.selectedService.splice(key,1);

			}
		});
	}


	$scope.saveIndustryService = function()
	{
		$scope.submitIndSer = true;
		error = false;
		if($scope.selectedService.length == 0 || $scope.selectedIndustry.length == 0)
		{
			error = true;
		}

		if(error == true)
		{
			return false;
		}

		var obj = {  service : $scope.selectedService, industry : $scope.selectedIndustry  };
		angular.element(".preloader").show();
		$http({
			url: '<?php echo base_url(); ?>freelancer/saveService',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
			if(response.data.message == "true")
			{
				angular.element(".preloader").hide();
				$.notify("Service Successfully Added", "success");
				$scope.getuserIndustry();
				$scope.getuserservice();
			}
		});
	}



	$scope.getuserIndustry();
	$scope.getuserservice();
});

//// services end

/////////testimonial test
var app11 = angular.module('myApp11', [])


app11.filter('date', function () {
	return function (item) {
		var dates = new Date(Date.parse(item))
		var newDate = '' + dates.getDate() + '-' + (dates.getMonth() + 1) + '-' + dates.getFullYear();
		return newDate;
	};
});

app11.controller('myCtrt11', function($scope,$window,$http) {
	$scope.logo ='';
	$scope.title ='';
	$scope.youtube_url='';
	$scope.testimonial ='';
	$scope.clientname='';
	$scope.website ='';
	$scope.testimonials = [];
	$scope.page =1;
	$scope.dkey ='';
	$scope.did ='';

	$scope.savetestimonial = function ()
	{
		$scope.submittestimonial = true;
		var error = false;
		$scope.title =  angular.element("#title").val();
		$scope.youtube_url = angular.element("#youtube_url").val();
		$scope.testimonial = angular.element("#testimonial").val();
		$scope.clientname = angular.element("#name").val();
		$scope.website = angular.element("#website").val();



		if($scope.title == '' ||  $scope.testimonial == '' || $scope.clientname == '' || $scope.website == '' )
		{
			error = true;
		}
		if(error == true)
		{
			return false;
		}

		angular.element(".preloader").show();
		var obj = {  testimonialTitle : $scope.title ,testimonialYoutubeUrl : $scope.youtube_url,testimonialDescription  : $scope.testimonial,testimonialClientName  : $scope.clientname , testimonialWebsite  : $scope.website ,testimonialLogo : $scope.logo  };

		$http({
			url: '<?php echo base_url(); ?>freelancer/testimonial/save',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
			//console.log(response);
			if(response.data.message == "true")
			{
				angular.element(".preloader").hide();
				angular.element("#title").val('');
				angular.element("#youtube_url").val('');
				angular.element("#testimonial").val('');
				angular.element("#name").val('');
				angular.element("#website").val('');
				$scope.logo='';
				$.notify("Testimonial Added Successfully", "success");
			}

		});
	}

	$scope.logoupload = function ($event) {

		var files =$event.files;
		for (var i = 0; i < files.length; i++) {
			var f = files[i]
			var fileName = files[i].name;
			var filePath = fileName;

			var fileReader = new FileReader();
			fileReader.onload = (function(e) {
				jQuery('.testimonialview').show();
				jQuery('.testimonialview').attr('src',e.target.result);
				var d = JSON.stringify({ image :  e.target.result });
				$http({
					url: '<?php echo base_url(); ?>freelancer/testimonial_logoupload',
					method: "POST",
					data: d,
					headers: {
						'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
					}
				}).then(function(response) {
					$scope.logo = response.data;


				});

			});
			fileReader.readAsDataURL(f);
		}

	}

	$scope.alltestimonial = function ($id)
	{
		var obj = {  page : $scope.page }

		$http({
			url: '<?php echo base_url(); ?>freelancer/gettestimonial',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {

			$scope.testimonials = response.data.result;
			$scope.total = response.data.pcount;

			if($scope.page == 1)
			$scope.pagination($scope.total);
		});
	}

	$scope.pagination = function ($event)
	{
		  if($scope.total > 10)
			{
				$('#pagination').pagination({
					items: $event,
					itemsOnPage: 10,
					cssStyle: 'light-theme',
					onPageClick:  function (e) {
						$scope.page  = e;
						$scope.alltestimonial();
					 }
				});
			}
	}

	$scope.delete_confirm = function(key,id)
	{
		$scope.dkey = key;
		$scope.did = id;
		angular.element("#confirmDelete").modal('show');
	}


	$scope.delete_testimonial = function (key,id)
	{
		var obj = {  id : id }

		$http({
			url: '<?php echo base_url(); ?>freelancer/testimonial_delete',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {

			if(response.data.message == "true")
			{
				angular.element("#confirmDelete").modal('hide');
				$.notify("Testimonial Deleted Successfully", "success");
				$scope.testimonials.splice(key,1);
			}

		});
	}




		$scope.testimonial_edit = function (id)
		{
			var obj = {  id : id  }

			$http({
				url: '<?php echo base_url(); ?>freelancer/testimonial_edit',
				method: "POST",
				data: obj,
				headers: {
					'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
				}
			}).then(function(response) {

				if(response.data.message == "true")
				{
         $scope.edittestimonial = response.data.result;
				 $scope.title = $scope.edittestimonial.testimonialTitle;
				 $scope.website = $scope.edittestimonial.testimonialWebsite;
				 $scope.youtube_url = $scope.edittestimonial.testimonialYoutubeUrl;
				 $scope.clientname = $scope.edittestimonial.testimonialClientName;
				 $scope.description = $scope.edittestimonial.testimonialDescription;
				 if($scope.edittestimonial.testimonialLogo)
				 {
				 angular.element("#logo").attr('src',"<?php echo base_url(); ?>assets/testimonial_logo/"+$scope.edittestimonial.testimonialLogo);
			   }
          angular.element("#edittestimonial").modal('show');
				}

			});
		}

		$scope.testimonial_update = function()
		{
			$scope.testsubmit = true;
			var error = false;
			$scope.title =  angular.element("#title").val();
			$scope.youtube_url = angular.element("#url").val();
			$scope.testimonial = angular.element("#description").val();
			$scope.clientname = angular.element("#clientname").val();
			$scope.website = angular.element("#website").val();



			if($scope.title == '' ||  $scope.testimonial == '' || $scope.clientname == '' || $scope.website == '' )
			{
				error = true;
			}
			if(error == true)
			{
				return false;
			}
			angular.element(".preloader").show();
			var obj = {  testimonialId:$scope.edittestimonial.testimonialId,testimonialTitle : $scope.title ,testimonialYoutubeUrl : $scope.youtube_url,testimonialDescription  : $scope.testimonial,testimonialClientName  : $scope.clientname , testimonialWebsite  : $scope.website ,testimonialLogo : $scope.logo  };

			$http({
				url: '<?php echo base_url(); ?>freelancer/testimonial_update',
				method: "POST",
				data: obj,
				headers: {
					'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
				}
			}).then(function(response) {
				//console.log(response);
				if(response.data.message == "true")
				{
					angular.element(".preloader").hide();
          $.notify("Testimonial Updated Successfully", "success");
					$scope.alltestimonial();
					  angular.element("#edittestimonial").modal('hide');
				}

			});
		}


	$scope.alltestimonial();


});

/////////testimonial end

// case study
var app12 = angular.module('myApp12', [])


app12.controller('myCtrt12', function($scope,$window,$http) {
	$scope.industry = [];
	$scope.casestudys = [];
	$scope.services = [];
	$scope.casestudys = [];
	$scope.ind ='';
	$scope.ser ='';
	$scope.case_title = '';
	$scope.case_info ='';
	$scope.case_document ='';
	$scope.page =1;
	$scope.dkey ='';
	$scope.did ='';

	$http({
		url: '<?php echo base_url(); ?>freelancer/userindustry',
		method: "POST",
		headers: {
			'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
		}
	}).then(function(response) {

		$scope.industry = response.data.industry;
		//console.log($scope.industry);
	});

	$http({
		url: '<?php echo base_url(); ?>freelancer/userservices',
		method: "POST",
		headers: {
			'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
		}
	}).then(function(response) {

		$scope.services = response.data.service;

	});

	$scope.savecasestudy = function ()
	{
		$scope.submitcasestudy = true;
		var error = false;
		$scope.ind =  angular.element("#industry").val();
		$scope.ser = angular.element("#service").val();
		$scope.case_title = angular.element("#case_title").val();
		$scope.case_info = angular.element("#case_info").val();


		if($scope.ind == '' || $scope.ser == '' || $scope.case_title == '' || $scope.case_info == '' || $scope.case_document == '' )
		{
			error = true;
		}
		if(error == true)
		{
			return false;
		}

		var obj = {  industryId : $scope.ind ,serviceId  : $scope.ser,casestudyTitle  : $scope.case_title,casestudyDocument   : $scope.case_document , casestudyInfo  : $scope.case_info  };
		angular.element(".preloader").show();
		$http({
			url: '<?php echo base_url(); ?>freelancer/casestudySave',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
			//console.log(response);
			if(response.data.message == "true")
			{
				$scope.submitcasestudy =false;
				angular.element(".preloader").hide();
				angular.element("#industry").val('');
				angular.element("#service").val('');
				angular.element("#case_title").val('');
				angular.element("#case_info").val('');
				$scope.case_document='';
				angular.element(".document").text('choose file');
				$.notify("Case Study Added Successfully", "success");
				$scope.casestudy();
			}

		});
	}

	// document upload
	$scope.documentupload = function ($event) {

		var files =$event.files;
		for (var i = 0; i < files.length; i++) {
			var f = files[i]
			var fileName = files[i].name;
			var filePath = fileName;

			var fileReader = new FileReader();
			fileReader.onload = (function(e) {
				jQuery('#logoview').attr('src',e.target.result);
				var d = JSON.stringify({ image :  e.target.result });
				$http({
					url: '<?php echo base_url(); ?>freelancer/casestudy_upload',
					method: "POST",
					data: d,
					headers: {
						'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
					}
				}).then(function(response) {
					$scope.case_document = response.data;

				});

			});
			fileReader.readAsDataURL(f);
		}

	}
	// document upload

	//get case_study
	$scope.casestudy = function ($id)
	{
		var obj = {  page : $scope.page }

		$http({
			url: '<?php echo base_url(); ?>freelancer/getcasestudy',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {

			$scope.casestudys = response.data.result;
			$scope.total = response.data.pcount;

			if($scope.page == 1)
			$scope.pagination($scope.total);
		});
	}

	$scope.pagination = function ($event)
	{
		  if($scope.total > 10)
			{
				$('#pagination').pagination({
					items: $event,
					itemsOnPage: 10,
					cssStyle: 'light-theme',
					onPageClick:  function (e) {
						$scope.page  = e;
						$scope.casestudy();
					}
				});
			}
	}

	$scope.delete_confirm = function(key,id)
	{
		$scope.dkey = key;
		$scope.did = id;
		angular.element("#confirmDelete").modal('show');
	}


	$scope.delete_casestudy = function (key,id)
	{
		var obj = {  id : id }

		$http({
			url: '<?php echo base_url(); ?>freelancer/case_study_delete',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {

			if(response.data.message == "true")
			{
				angular.element("#confirmDelete").modal('hide');
				$.notify("Case Study Deleted Successfully", "success");
				$scope.casestudys.splice(key,1);
			}

		});
	}
	$scope.casestudy();


});

/// case study




/// service pricing
var app13 = angular.module('myApp13', [])


app13.filter('trustAsHtml',['$sce', function($sce) {

	return function(text) {

		return $sce.trustAsHtml(text);
       };
}]);

app13.controller('myCtrt13', function($scope,$window,$http) {
	$scope.pricings = [];
	$scope.services = [];
	$scope.ser ='';
	$scope.price = '';
	$scope.key ='';
	$scope.page =1;
	$scope.dkey ='';
	$scope.did ='';

	$http({
		url: '<?php echo base_url(); ?>freelancer/userservices',
		method: "POST",
		headers: {
			'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
		}
	}).then(function(response) {

		$scope.services = response.data.service;

	});

	$scope.savepricing = function ()
	{
		$scope.submitpricing = true;
		var error = false;
		$scope.ser = angular.element("#service").val();
		$scope.price = angular.element("#price").val();
		$scope.key = CKEDITOR.instances['key'].getData();



		if($scope.ser == '' || $scope.price == '' || $scope.key == '')
		{
			error = true;
		}
		if(error == true)
		{
			return false;
		}

		var obj = {  serviceId  : $scope.ser , pricingKeyPoint  : $scope.key,pricingPrice    : $scope.price   };

		$http({
			url: '<?php echo base_url(); ?>freelancer/service_pricingSave',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
			//console.log(response);
			if(response.data.message == "true")
			{
				angular.element("#service").val('');
				angular.element("#price").val('');
				CKEDITOR.instances['key'].setData('');
				$.notify("Pricing Added Successfully", "success");
				$scope.pricing();
			}

		});
	}

	//get case_study
	$scope.pricing = function ($id)
	{
		var obj = {  page : $scope.page }

		$http({
			url: '<?php echo base_url(); ?>freelancer/getservice_pricing',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {

			$scope.pricings = response.data.result;
			$scope.total = response.data.pcount;

			if($scope.page == 1)
			$scope.pagination($scope.total);
		});
	}

	$scope.pagination = function ($event)
	{
		if($scope.total > 10)
		{
				$('#pagination').pagination({
					items: $event,
					itemsOnPage: 10,
					cssStyle: 'light-theme',
					onPageClick:  function (e) {
						$scope.page  = e;
						$scope.pricing();
					}
				});
			}
	}


	$scope.delete_confirm = function(key,id)
	{
		$scope.dkey = key;
		$scope.did = id;
		angular.element("#confirmDelete").modal('show');
	}


	$scope.delete_pricing = function (key,id)
	{
		var obj = {  id : id }

		$http({
			url: '<?php echo base_url(); ?>freelancer/service_pricing_delete',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {

			if(response.data.message == "true")
			{
				angular.element("#confirmDelete").modal('hide');
				$.notify("Pricing Deleted Successfully", "success");
				$scope.pricings.splice(key,1);
			}

		});
	}
	$scope.pricing();


});

/// service pricing



/// service pricing
var app14 = angular.module('myApp14',[])



app14.controller('myCtrt14', function($scope,$window,$http) {
	$scope.teams =[];
	$scope.services =[];
	$scope.allproject = [];
	$scope.years =[];
	$scope.experience =[];

	$scope.name ='';
	$scope.designation = '';
	$scope.hourly ='';
	$scope.image ='';
	$scope.email ='';
	$scope.status ='';
	$scope.access ='';
	$scope.phone ='';
	$scope.address ='';
	$scope.skill ='';
	$scope.page =1;
	$scope.dkey = '';
	$scope.did = '';
	$scope.editTeam = '';
	$scope.name1 ='';
	$scope.paccess = '';
	// edit v
	$scope.name1 ='';
	$scope.designation1 = '';
	$scope.hourly1 ='';
	$scope.image1 ='';
	$scope.access1 ='';
	$scope.phone1 ='';
	$scope.address1 ='';
	$scope.skill1 ='';
	$scope.status1 = '';

	$scope.month =  ["January", "February", "March", "April", "May", "June",
	"July", "August", "September", "October", "November", "December"];


		var l = new Date().getFullYear();
		for (var i = 2010; i <= l; i++) {
				$scope.years.push(i);
		}

		$scope.cars = [{id:1, name: 'Audi'}, {id:2, name: 'BMW'}, {id:1, name: 'Honda'}];
		    $scope.selectedCar = [];

$scope.experienceAdd = function ($event)
{

	$scope.experience.push({
		designation : '',
		MonthStart : '',
		YearStart : '',
		MonthEnd : '',
		YearEnd : '',
		description : '',
		company:'',
		working:'',
		button:''
});

}

$scope.deleteexperience = function ($key)
{
	$scope.experience.splice($key,1);
}


	$http({
		url: '<?php echo base_url(); ?>freelancer/userservices',
		method: "POST",
		headers: {
			'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
		}
	}).then(function(response) {

		$scope.services = response.data.service;

	});



	$scope.saveteam = function ()
	{
		$scope.submitteam = true;
		var error = false;
		$scope.name = angular.element("#name").val();
		$scope.designation = angular.element("#designation").val();
		$scope.hourly = angular.element("#hourly").val();
		$scope.phone = angular.element("#phone").val();
		$scope.address = angular.element("#address").val();
		$scope.access = angular.element("#access").val();
		$scope.status = angular.element("#status").val();
		$scope.email = angular.element("#email").val();
		$scope.skill = angular.element("#skill").val();
		$scope.project = angular.element("#project").val();


		if($scope.name == '' || $scope.designation == '' || $scope.hourly == '' || $scope.image == '' || $scope.phone == '' || $scope.address == '' || $scope.access == '' || $scope.status == '' || $scope.email == '')
		{
			error = true;
		}
		if(error == true)
		{
			return false;
		}

		angular.element(".preloader").show();
		var obj = {  name  : $scope.name , desig  : $scope.designation,logo: $scope.image , maxPrice : $scope.hourly ,rep_ph_num : $scope.phone, address1  : $scope.address,services : $scope.skill, access :$scope.access ,email : $scope.email,status : $scope.status ,project :$scope.project };


		$http({
			url: '<?php echo base_url(); ?>freelancer/teamSave',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
			//console.log(response);
			angular.element(".preloader").hide();
			if(response.data.success == "1")
			{
				angular.element("#name").val('');
				angular.element("#designation").val('');
				angular.element("#hourly").val('');
				angular.element("#phone").val('');
				angular.element("#address").val('');
				angular.element("#access").val('');
				angular.element("#status").val('');
				angular.element("#email").val('');
				angular.element("#empPic").val('');
				angular.element("#skill").val('');
				$.notify("Team Member Added Successfully", "success");
				$scope.team();
			}
			else if(response.data.success == "2")
			{
				$.notify("Email Address Register Already", "error");
			}

		});
	}

	//get team
	$scope.team = function ($id)
	{
		var obj = {  page : $scope.page }

		$http({
			url: '<?php echo base_url(); ?>freelancer/getteam',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {

			$scope.teams = response.data.result;
			$scope.total = response.data.pcount;

			if($scope.page == 1)
			$scope.pagination($scope.total);
		});
	}

	$scope.resendEmail = function (id)
	{
		var obj = {  id : id }
     angular.element(".preloader").show();
		$http({
			url: '<?php echo base_url(); ?>freelancer/teamResend',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
			angular.element(".preloader").hide();
			if(response.data.message =="true")
			{
				$.notify("Email Send Successfully", "success");

			}
		});
	}



	$scope.pagination = function ($event)
	{
		if($scope.total > 10)
		{
				$('#pagination').pagination({
					items: $event,
					itemsOnPage: 10,
					cssStyle: 'light-theme',
					onPageClick:  function (e) {
						$scope.page  = e;
						$scope.team();
					}
				});
			}
	}

	$scope.delete_confirm = function(key,id)
	{
		$scope.dkey = key;
		$scope.did = id;
		angular.element("#confirmDelete").modal('show');
	}

	$scope.delete_team = function (key,id)
	{
		var obj = {  id : id }

		$http({
			url: '<?php echo base_url(); ?>freelancer/team_delete',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {

			if(response.data.message == "true")
			{
				angular.element("#confirmDelete").modal('hide');
				$.notify("Team Member Deleted Successfully", "success");
				$scope.teams.splice(key,1);
			}

		});
	}

	$scope.teamStatus = function (st,key,id)
	{
		var obj = {  id : id , status : st }

		$http({
			url: '<?php echo base_url(); ?>freelancer/teamStatus',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {

			if(response.data.message == "true")
			{
				$.notify("Successfully Changed Status", "success");
				$scope.teams[key]['is_active'] = st;
			}

		});
	}

	// edit

	$scope.edit_team = function (id)
	{
		var obj = {  id : id  }

		$http({
			url: '<?php echo base_url(); ?>freelancer/editteam',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {

			if(response.data.message == "true")
			{
				$scope.editTeam = response.data.result;
				$scope.name1 = $scope.editTeam.name;
				$scope.designation1 = $scope.editTeam.desig;
				$scope.hourly1 = $scope.editTeam.maxPrice;
				angular.element("#teamviewimg").attr('src',"<?php echo base_url(); ?>assets/client_images/"+$scope.editTeam.logo);

				$scope.access1 = $scope.editTeam.access;
				$scope.phone1 = $scope.editTeam.phone ;
				$scope.address1 = $scope.editTeam.address1 ;
				$scope.skill1 = $scope.editTeam.servicesId;
				$scope.status1 = $scope.editTeam.is_active;
        if($scope.editTeam.experience.length != 0)
				{
				  for(var r in $scope.editTeam['experience'])
				  {

					var ex = {};
					ex['designation'] = $scope.editTeam['experience'][r]['experienceDesignation'];
					ex['MonthStart'] = $scope.editTeam['experience'][r]['experienceMonthStart'];
					ex['YearStart'] = $scope.editTeam['experience'][r]['experienceYearStart'];
					ex['MonthEnd'] = $scope.editTeam['experience'][r]['experienceMonthEnd'];
					ex['YearEnd'] = $scope.editTeam['experience'][r]['experienceYearEnd'];
					ex['description'] = $scope.editTeam['experience'][r]['experienceDescription'];
					ex['company'] = $scope.editTeam['experience'][r]['experienceCompany'];
					ex['working'] = $scope.editTeam['experience'][r]['experienceCurrentlyWorking'];
					$scope.experience.push(ex);
				   }
					 console.log($scope.experience);
				 }

				angular.element("#editTeam").modal('show');
			}

		});
	}

	$scope.accesschange = function()
	{
			var a = angular.element("#access").val();
      if(a == '2')
			{
				$scope.paccess =1;
			}
	}

	$scope.updateteam = function (id)
	{
		$scope.updatesubmit = true;
		var error = false;

		if($scope.name1 == '' || $scope.designation1 == '' || $scope.hourly1 == ''  || $scope.phone1 == '' || $scope.address1 == '' || $scope.access1 == '' || $scope.skill1 == '' || $scoep.status1 == '' )
		{
			error = true;
		}
		if(error == true)
		{
			return false;
		}

		angular.element(".preloader").show();
		var obj = {  name  : $scope.name1 , desig  : $scope.designation1,logo : $scope.image , maxPrice : $scope.hourly1 , rep_ph_num : $scope.phone1, address1 : $scope.address1,services : $scope.skill1, access :$scope.access1,id:$scope.editTeam.id,status:$scope.status1 };
		$http({
			url: '<?php echo base_url(); ?>freelancer/updateteam',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
			//console.log(response);
			angular.element(".preloader").hide();
			angular.element("#editTeam").modal('hide');
			if(response.data.message == "true")
			{

				$.notify("Team Member Update Successfully", "success");
				$scope.team();
			}


		});

	}

	// $scope.selectproject = function(id)
	// {
	// 	$scope.project.push(id);
	// 	console.log($scope.project);
	// }
	////edit
	// image upload
	$scope.imageupload = function ($event) {

		var files =$event.files;
		for (var i = 0; i < files.length; i++) {
			var f = files[i]
			var fileName = files[i].name;
			var filePath = fileName;

			var fileReader = new FileReader();
			fileReader.onload = (function(e) {
				jQuery('#teamviewimg').attr('src',e.target.result);
				var d = JSON.stringify({ image :  e.target.result });
				$http({
					url: '<?php echo base_url(); ?>freelancer/team_imageupload',
					method: "POST",
					data: d,
					headers: {
						'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
					}
				}).then(function(response) {
					$scope.image = response.data;

				});

			});
			fileReader.readAsDataURL(f);
		}

	}
  // image upload

	///get project
	$scope.getActiveContract = function (id)
 {
	 $http({
		 url: '<?php echo base_url(); ?>freelancer/getActiveContract',
		 method: "POST",
		 headers: {
			 'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
		 }
	 }).then(function(response) {

		 if(response.data.message == "true")
		 {
       $scope.allproject = response.data.result;
		 }


	 });

 }

	/// get project

	$scope.team();
  $scope.getActiveContract();

});

/// team
// password update

var app15 = angular.module('myApp15', [])

app15.controller('myCtrt15', function($scope,$window,$http) {
	$scope.pass = '';
	$scope.cpass = '';

	$scope.passupdate = function ()
	{
		$scope.submitpass = true;
		var error = false;
		$scope.pass = angular.element("#pass").val();
		$scope.cpass = angular.element("#cpass").val();

		if($scope.pass == '' || $scope.cpass == '')
		{
			error = true;
		}

		if($scope.pass != $scope.cpass)
		{
			return false;
		}

		if($scope.pass.length < 6)
		{
			return false;
		}

		if(error == true)
		{
			return false;
		}

		var obj = {  pass  : $scope.pass   };

		$http({
			url: '<?php echo base_url(); ?>freelancer/password_update',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
			//console.log(response);
			if(response.data.message == "true")
			{
				angular.element("#pass").val('');
				angular.element("#cpass").val('');
				$.notify("Password Update Successfully", "success");

			}

		});
	}

});

// password update

//service information
var app16 = angular.module('myApp16', [])


 app16.directive('ckEditor', function () {

 return {
	 require: '?ngModel',
	 link: function (scope, elm, attr, ngModel) {
		 var ck = CKEDITOR.replace(elm[0]);
		 if (!ngModel) return;
		 ck.on('instanceReady', function () {
			 ck.setData(ngModel.$viewValue);
		 });
		 function updateModel() {
			 scope.$apply(function () {
				 ngModel.$setViewValue(ck.getData());
			 });
		 }
		 ck.on('change', updateModel);
		 ck.on('key', updateModel);
		 ck.on('dataReady', updateModel);

		 ngModel.$render = function (value) {
			 ck.setData(ngModel.$viewValue);
		 };
	 }
 };
});

app16.controller('myCtrt16', function($scope,$window,$http) {
	$scope.serviceinfo = [];



  $scope.getserviceinfo = function ()
	{

		$http({
			url: '<?php echo base_url(); ?>freelancer/getservice_info',
			method: "POST",
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
			if(response.data.message == "true")
			{
      $scope.serviceinfo = response.data.result;

      }

		});

	  }

	$scope.submitserviceInfo = function ()
  {

    $scope.infoSubmit = true;
    var error = true;

    for( var res in $scope.serviceinfo)
    {

      if($scope.serviceinfo[res]['description'] && $scope.serviceinfo[res]['description'] != '' )
       {
         error = false;
        }
    }


    if(error == true)
    {
     return false;
    }

    var m = JSON.stringify({ serinfo : $scope.serviceinfo });
    angular.element(".preloader").show();
     $http({
     url: '<?php echo base_url(); ?>freelancer/service_infoSave',
     method: "POST",
     data: m,
     headers: {
      'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
       }
     }).then(function(response) {

       angular.element(".preloader").hide();

       if(response.data.message == "true")
        {
          $.notify("Service Description Successfully Added", "success");
					$scope.getserviceinfo();
        }


         });

  }

$scope.getserviceinfo();
});
//// service information


var app17 = angular.module('myApp17', [])

app17.filter('date', function () {
	return function (item) {
		var dates = new Date(Date.parse(item))
		var newDate = '' + dates.getDate() + '-' + (dates.getMonth() + 1) + '-' + dates.getFullYear();
		return newDate;
	};
});
app17.controller('myCtrt17', function($scope,$window,$http) {

  $scope.request = [];
  $scope.page = 1;

	$scope.getrequest = function ()
	{
   var obj = {  page : $scope.page }
		$http({
			url: '<?php echo base_url(); ?>freelancer/getrequest',
			method: "POST",
			data:obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
			  $scope.request = response.data.result;
				$scope.total = response.data.pcount;

				if($scope.page == 1)
				$scope.pagination($scope.total);
			});
		}

		$scope.pagination = function ($event)
		{
			if($scope.total > 10)
			{
					$('#pagination').pagination({
						items: $event,
						itemsOnPage: 10,
						cssStyle: 'light-theme',
						onPageClick:  function (e) {
							$scope.page  = e;
							$scope.getrequest();
						}
					});
				}
		}

$scope.getrequest();
});

/// end request

/// team member profileImg
var app18 = angular.module('myApp18', [])

app18.controller('myCtrt18', function($scope,$window,$http) {
	$scope.profile = [];
	$scope.experience =[];
	$scope.activity ='';
	$scope.other ='';
	$scope.refservices = [];
	$scope.services =[];
	$scope.years =[];
	$scope.image ='';
	//$scope.certificate ='';
	$scope.name ='';
	$scope.designation ='';
	$scope.phone ='';
	$scope.address ='';
	$scope.about ='';
	$scope.month =  ["January", "February", "March", "April", "May", "June",
  "July", "August", "September", "October", "November", "December"];


		var l = new Date().getFullYear();
    for (var i = 2010; i <= l; i++) {
        $scope.years.push(i);
    }


$scope.experienceAdd = function ($event)
{

	$scope.experience.push({
		designation : '',
		MonthStart : '',
		YearStart : '',
		MonthEnd : '',
		YearEnd : '',
		description : '',
		company:'',
		working:'',
		button:''
});

}

$scope.deleteexperience = function ($key)
{
  $scope.experience.splice($key,1);
}

$scope.skills = function($event)
{
	var text = angular.element($event).val();
	var m = JSON.stringify({ name : text });
	 $http({
	 url: '<?php echo base_url(); ?>freelancer/serviceSearch',
	 method: "POST",
	 data: m,
	 headers: {
		'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
		 }
	 }).then(function(response) {

		 if(response.data.message == "true")
			{
		    $scope.refservices = response.data.result;
			}


			 });
}

$scope.addservices = function (name,id)
{

    var obj ={};
		obj['name'] = name;
		obj['id'] = id;
		$scope.services.push(obj);
		angular.element('#skills').val('');
		$scope.refservices = [];
}

$scope.deleteservice = function (key)
{
	$scope.services.splice(key,1);
}


	$scope.getuserprofile = function ()
	{

		$http({
			url: '<?php echo base_url(); ?>freelancer/getuserprofile',
			method: "POST",
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
			if(response.data.message == "true")
			{
       $scope.profile = response.data.result;
       $scope.other = $scope.profile['activityType'];
			  for(var r in $scope.profile['services'])
			  {
					var obj = {};
				  obj['id'] = $scope.profile['services'][r]['id'];
				  obj['name'] = $scope.profile['services'][r]['service'];

					$scope.services.push(obj);

			  }
				for(var r in $scope.profile['experience'])
			  {

					var ex = {};
				  ex['designation'] = $scope.profile['experience'][r]['experienceDesignation'];
				  ex['MonthStart'] = $scope.profile['experience'][r]['experienceMonthStart'];
					ex['YearStart'] = $scope.profile['experience'][r]['experienceYearStart'];
					ex['MonthEnd'] = $scope.profile['experience'][r]['experienceMonthEnd'];
					ex['YearEnd'] = $scope.profile['experience'][r]['experienceYearEnd'];
					ex['description'] = $scope.profile['experience'][r]['experienceDescription'];
					ex['company'] = $scope.profile['experience'][r]['experienceCompany'];
					ex['working'] = $scope.profile['experience'][r]['experienceCurrentlyWorking'];
					$scope.experience.push(ex);
			  }
      }

		});
	}

	$scope.profileupdate = function ()
  {

    $scope.infoSubmit = true;
    var error = false;
    $scope.name = angular.element('#name').val();
		$scope.designation = angular.element('#designation').val();
		$scope.phone = angular.element('#phone').val();
		$scope.address = angular.element('#address').val();
		$scope.about = CKEDITOR.instances['about'].getData();
		if($scope.other == 2)
		{
			$scope.activity = angular.element('#achivment').val();
		}
     if($scope.name =='' && $scope.designation == "" && $scope.phone == '' && $scope.address == "" && $scope.about == '' && $scope.services.lenth == 0)
		 {
        error = true;
     }

   if(error == true)
    {
     return false;
    }

    var m = JSON.stringify({ name  : $scope.name,company_logo :$scope.image,desig: $scope.designation ,rep_ph_num  : $scope.phone ,address1 : $scope.address,about : $scope.about,experience:$scope.experience,services:$scope.services,activityType:$scope.other,activity : $scope.activity });
    angular.element(".preloader").show();
     $http({
     url: '<?php echo base_url(); ?>freelancer/teamProfileUpdate',
     method: "POST",
     data: m,
     headers: {
      'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
       }
     }).then(function(response) {

       angular.element(".preloader").hide();

       if(response.data.message == "true")
        {
          $.notify("Profile Update Successfully", "success");
					//$scope.getserviceinfo();
        }


         });

  }

	$scope.uploadcertificate = function ($event) {

		var files =$event.files;
		for (var i = 0; i < files.length; i++) {
			var f = files[i]
			var fileName = files[i].name;
			var filePath = fileName;

			var fileReader = new FileReader();
			fileReader.onload = (function(e) {
				var d = JSON.stringify({ image :  e.target.result });
				$http({
					url: '<?php echo base_url(); ?>freelancer/team_certificate',
					method: "POST",
					data: d,
					headers: {
						'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
					}
				}).then(function(response) {
					$scope.activity = response.data;

				});

			});
			fileReader.readAsDataURL(f);
		}

	}

	$scope.uploadImage = function ($event) {

		var files =$event.files;
		for (var i = 0; i < files.length; i++) {
			var f = files[i]
			var fileName = files[i].name;
			var filePath = fileName;

			var fileReader = new FileReader();
			fileReader.onload = (function(e) {
				var d = JSON.stringify({ image :  e.target.result });
				$http({
					url: '<?php echo base_url(); ?>freelancer/team_imageupload',
					method: "POST",
					data: d,
					headers: {
						'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
					}
				}).then(function(response) {
					$scope.image = response.data;

				});

			});
			fileReader.readAsDataURL(f);
		}

	}

$scope.getuserprofile();
});
/// team

///getportfolio
var app19 = angular.module('myApp19', [])

app19.filter('date', function () {
	return function (item) {
		var dates = new Date(Date.parse(item))
		var newDate = '' + dates.getDate() + '-' + (dates.getMonth() + 1) + '-' + dates.getFullYear();
		return newDate;
	};
});


app19.filter('trustAsHtml',['$sce', function($sce) {

	return function(text) {

		return $sce.trustAsHtml(text);
       };
}]);

app19.controller('myCtrt19', function($scope,$window,$http) {

  $scope.portfolio = [];
  $scope.page = 1;
	$scope.services =[];
	$scope.title ='';
	$scope.description ='';
	$scope.website ='';
	$scope.image ='';
	$scope.id ='';
	$scope.key='';
	$scope.editportfolio = [];


	$scope.getportfolio = function ()
	{
   var obj = {  page : $scope.page }
		$http({
			url: '<?php echo base_url(); ?>freelancer/getportfolio',
			method: "POST",
			data:obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
			  $scope.portfolio = response.data.result;
				$scope.total = response.data.pcount;

				if($scope.page == 1)
				$scope.pagination($scope.total);
			});
		}

		$scope.pagination = function ($event)
		{
			if($scope.total > 10)
			{
					$('#pagination').pagination({
						items: $event,
						itemsOnPage: 10,
						cssStyle: 'light-theme',
						onPageClick:  function (e) {
							$scope.page  = e;
							$scope.getportfolio();
						}
					});
				}
		}

		$scope.uploadImage = function ($event) {

			var files =$event.files;
			for (var i = 0; i < files.length; i++) {
				var f = files[i]
				var fileName = files[i].name;
				var filePath = fileName;

				var fileReader = new FileReader();
				fileReader.onload = (function(e) {
					var d = JSON.stringify({ image :  e.target.result });
					$http({
						url: '<?php echo base_url(); ?>freelancer/portfolioImage',
						method: "POST",
						data: d,
						headers: {
							'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
						}
					}).then(function(response) {
						$scope.image = response.data;

					});

				});
				fileReader.readAsDataURL(f);
			}

		}

		$scope.skills = function($event)
		{
			var text = angular.element($event).val();
			var m = JSON.stringify({ name : text });
			 $http({
			 url: '<?php echo base_url(); ?>freelancer/serviceSearch',
			 method: "POST",
			 data: m,
			 headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
				 }
			 }).then(function(response) {

				 if(response.data.message == "true")
					{
				    $scope.refservices = response.data.result;
					}


					 });
		}

		$scope.addservices = function (name,id)
		{
        var obj ={};
				obj['name'] = name;
				obj['id'] = id;

				 var match = false;
		      for(var v in $scope.services)
		      {
		       if($scope.services[v]['id'] == obj['id'] )
		        {
		         match = true;
		        }

		      }

		      if(!match)
		      {
						$scope.services.push(obj);
						angular.element('#skills').val('');
						$scope.refservices = [];
		      }
		}

		$scope.deleteservice = function (key)
		{
			$scope.services.splice(key,1);
		}

		$scope.portfolioSave = function()
		{
			$scope.submitport = true;
			var error = false;
			$scope.title = angular.element('#title').val();
		  $scope.website = angular.element('#website').val();
		  $scope.description = CKEDITOR.instances['description'].getData();


			 if($scope.title =='' && $scope.description == '' && $scope.website == ''  && $scope.image == '' && $scope.services.length == 0)
			{
					error = true;
			 }

		 if(error == true)
			{
			 return false;
			}

			var m = JSON.stringify({ portfolioTitle  : $scope.title,portfolioDescription :$scope.description,portfolioImage: $scope.image ,portfolioWebsite:$scope.website,services : $scope.services  });
			angular.element(".preloader").show();
			 $http({
			 url: '<?php echo base_url(); ?>freelancer/portfolioSave',
			 method: "POST",
			 data: m,
			 headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
				 }
			 }).then(function(response) {

				 angular.element(".preloader").hide();

				 if(response.data.message == "true")
					{
						$scope.submitport = false;
						$.notify("Portfolio Added Successfully", "success");
						angular.element('#portfolio').modal('hide');
						angular.element('#title').val('');
						angular.element('#website').val('');
						$scope.services = [];
						$scope.image = '';
						CKEDITOR.instances['description'].setData('');
						angular.element('.image').val('');
					  $scope.getportfolio();

					}


					 });

		}

		$scope.delete_confirm = function(key,id)
		{
			$scope.dkey = key;
			$scope.id = id;
			angular.element("#confirmDelete").modal('show');
		}

		$scope.delete_portfolio = function (key,id)
		{
			var obj = {  id : id }

			$http({
				url: '<?php echo base_url(); ?>freelancer/portfolioDelete',
				method: "POST",
				data: obj,
				headers: {
					'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
				}
			}).then(function(response) {

				if(response.data.message == "true")
				{
					angular.element("#confirmDelete").modal('hide');
					$.notify("Team Member Deleted Successfully", "success");
					$scope.portfolio.splice(key,1);
				}

			});
		}

		$scope.editPortfolio = function(id)
		{
			var obj = {  id : id }
			$http({
				url: '<?php echo base_url(); ?>freelancer/portfolioedit',
				method: "POST",
				data: obj,
				headers: {
					'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
				}
			}).then(function(response) {

				if(response.data.message == "true")
				{
					$scope.editportfolio = response.data.result;
					$scope.title = $scope.editportfolio.portfolioTitle;
					$scope.website = $scope.editportfolio.portfolioWebsite;
         CKEDITOR.instances['descriptionedit'].setData($scope.editportfolio.portfolioDescription);

			   for(var r in $scope.editportfolio['services'])
					 {
						 var obj ={};
						obj['name'] = $scope.editportfolio['services'][r]['service'];
						obj['id']  = $scope.editportfolio['services'][r]['id'];
            $scope.services.push(obj);
						//console.log($scope.services);
					 }
					angular.element("#editportfolio").modal('show');
      	}

			});

		}

		$scope.portfolioUpdate = function()
		{
			$scope.submitport = true;
			var error = false;
			$scope.title = angular.element('#title').val();
		  $scope.website = angular.element('#website').val();
		  $scope.description = CKEDITOR.instances['descriptionedit'].getData();


			 if($scope.title =='' && $scope.description == '' && $scope.website == ''   && $scope.services.length == 0)
			{
					error = true;
			 }

		 if(error == true)
			{
			 return false;
			}

			var m = JSON.stringify({ portfolioId:$scope.editportfolio.portfolioId,portfolioTitle  : $scope.title,portfolioDescription :$scope.description,portfolioImage: $scope.image ,portfolioWebsite:$scope.website,services : $scope.services  });
			angular.element(".preloader").show();
			 $http({
			 url: '<?php echo base_url(); ?>freelancer/portfolioupdate',
			 method: "POST",
			 data: m,
			 headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
				 }
			 }).then(function(response) {

				 angular.element(".preloader").hide();

				 if(response.data.message == "true")
					{
						$.notify("Portfolio Updated Successfully", "success");
						angular.element('#editportfolio').modal('hide');
					  $scope.getportfolio();

					}


					 });

		}

$scope.getportfolio();
});


//endgetportfolio

// account update
var app20 = angular.module('myApp20', [])
app20.controller('myCtrt20', function($scope,$window,$http) {

  $scope.accounts = [];
	$scope.email ='';



	$scope.getaccount = function ()
	{

		$http({
			url: '<?php echo base_url(); ?>freelancer/getaccount',
			method: "POST",
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
			  $scope.accounts = response.data.result;
				$scope.email = $scope.accounts.accountEmail;

			});
		}


		$scope.Accountupdate = function()
		{
			$scope.submitacc = true;
			var error = false;
			$scope.email = angular.element('#email').val();

    if($scope.email =='' )
			{
					error = true;
			 }

		 if(error == true)
			{
			 return false;
			}

			var m = JSON.stringify({ accountEmail:$scope.email  });
			angular.element(".preloader").show();
			 $http({
			 url: '<?php echo base_url(); ?>freelancer/accountUpdate',
			 method: "POST",
			 data: m,
			 headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
				 }
			 }).then(function(response) {

				 angular.element(".preloader").hide();

				 if(response.data.message == "true")
					{
						$.notify("Account Updated Successfully", "success");

					}


					 });

		}

$scope.getaccount();
});
///account update

// proposal

var app21 = angular.module('myApp21', [])

app21.filter('underscoreless', function () {
	return function (input) {
		//console.log(input);
		return input.split(' ').join('-');

	};
});

app21.filter('trustAsHtml',['$sce', function($sce) {

		 return function(text) {

			 return $sce.trustAsHtml(text);
					};
	 }]);

app21.controller('myCtrt21', function($scope,$window,$http) {

	$scope.page = 1;
	$scope.proposal = [];
	$scope.detail =[];
	$scope.total = 0;


	$scope.getproposal = function ($id)
	{
		var obj = {  page : $scope.page }

		$http({
			url: '<?php echo base_url(); ?>freelancer/getproposal',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {

			$scope.proposal = response.data.result;
			$scope.total = response.data.pcount;

			if($scope.page == 1)
			$scope.pagination($scope.total);
		});
	}

	$scope.pagination = function ($event)
	{
		if($scope.total > 10)
		{
				$('#pagination').pagination({
					items: $event,
					itemsOnPage: 10,
					cssStyle: 'light-theme',
					onPageClick:  function (e) {
						$scope.page  = e;
						$scope.getproposal();
					}
				});
		 }
	}

	$scope.proposalDetail = function(id)
	{
		var obj = {  id : id }

		$http({
			url: '<?php echo base_url(); ?>freelancer/getproposaldetail',
			method: "POST",
			data: obj,
			headers: {
				'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
			}
		}).then(function(response) {
         if(response.data.message == "true")
			   {
		    	 $scope.detail = response.data.result;
					 angular.element('#proposalDetail').modal('show');
		     }
		 });
	}

	$scope.getproposal();
});

///proposal endmy

</script>

<script>


var stickyOffset = $('.sticky').offset().top;



$(window).scroll(function(){

	var sticky = $('.sticky'),

	scroll = $(window).scrollTop();



	if (scroll >= stickyOffset) sticky.addClass('fixed');

	else sticky.removeClass('fixed');

});



</script>

<script>


function validateMobile(phn){

	var phoneno = /^\d{10}$/;

	if(!(phn.match(phoneno))){

		return false;

	}else{

		return true;

	}

}



function ajaxCall(act, xData, callBack ){

	$.ajax({

		beforeSend : function(){$(".preloader").toggleClass('d-none')},

		url : './dashboard/ajax.php?act='+act,

		data : xData,

		method : 'post',

		success : callBack

	})

}



$(document).ready(function(){

	$('.datatable').DataTable({

		"bSort": false,

		"pagingType": "simple",

		"lengthMenu": [[5, 10, 15, -1], [5, 10, 15, "All"]],

	});

	$('.dataTables_wrapper select').removeClass().addClass("custom-select rounded-0 mb-3");

	$('.dataTables_wrapper input').removeClass('input-sm').addClass("form-control-sm mb-3");

	$('.dataTables_filter input').attr("placeholder", "Filter");

	$('.dataTables_wrapper .pagination li').addClass("page-item p-1");



});



$(function () {

	$('[data-toggle="tooltip"]').tooltip()

});



$(".customUpload").on('change', function(){

	imgInp = $("input.customUpload");

	img = imgInp.val().split("\\");

	var filename = img[img.length - 1];

	//alert(filename);

	$(this).parents('form').find(".customUploadLabel").html(filename);

});

</script>


<script>

$('.delme').click(function(e){

	e.preventDefault();

	$('#Delete').modal('show');

	var liNK = $(this).attr('href');

	$("#yEs").attr("href",liNK);

});







</script>
<script>

$(document).ready(function(){
	$(".dataTables_filter label").append(" <button class='clear-btn'>X</button>");
	var table = $('.dataTable').DataTable();
	$(".dataTables_filter .clear-btn").click(function(){
		// location.reload();
		// setTimeout(function() { location.reload() },50);
		table.search('').draw();
		// $(".dataTables_filter input").val(" ");
		// $(".dataTables_filter input").placeholder = "Type name here..";
	});

});

</script>
<style type="text/css">
.clear-btn {
	background-color: rgba(0, 0, 0, 0);
	border: 0 none;
	cursor: pointer;
	height: 30px;
	position: absolute;
	right: 20px;
	top: 0;
}
</style>

</body>

</html>
